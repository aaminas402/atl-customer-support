<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-connectivity" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Troubleshooting Snowflake connectivity | Atlan Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.atlan.com/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-connectivity"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Troubleshooting Snowflake connectivity | Atlan Documentation"><meta data-rh="true" name="description" content="Learn about troubleshooting snowflake connectivity."><meta data-rh="true" property="og:description" content="Learn about troubleshooting snowflake connectivity."><link data-rh="true" rel="icon" href="/img/atlan.ico"><link data-rh="true" rel="canonical" href="https://docs.atlan.com/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-connectivity"><link data-rh="true" rel="alternate" href="https://docs.atlan.com/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-connectivity" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.atlan.com/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-connectivity" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://N7XGBZ1DRU-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Snowflake","item":"https://docs.atlan.com/apps/connectors/data-warehouses/snowflake/"},{"@type":"ListItem","position":2,"name":"Troubleshooting Snowflake connectivity","item":"https://docs.atlan.com/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-connectivity"}]}</script><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TZTFMW4J",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Atlan Documentation" href="/opensearch.xml">
<script>window.chatbaseConfig={chatbotId:"btNPYbU8VGvFO0WWx3RKy"}</script>
<script src="https://darkvisitors.com/tracker.js?project_key=d507548f-a6ca-4d07-a911-d7ba35b9fec1"></script>
<script src="/scripts/atlan-scout.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.2ae6c2ab.css">
<script src="/assets/js/runtime~main.0b8b8442.js" defer="defer"></script>
<script src="/assets/js/main.8984a2fd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TZTFMW4J" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/atlan-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top customNavbar_Xl4v"><div class="topRow_xtvp"><div class="leftSection_J1NA"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/atlan-logo.svg" alt="Atlan Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="52" width="52"><img src="/img/atlan-logo.svg" alt="Atlan Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="52" width="52"></div><b class="navbar__title text--truncate"></b></a></div><div class="centerSection_aleN"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="rightSection_NZiV"><a href="https://docs.google.com/forms/d/e/1FAIpQLScuAIhCm2GS7YFstrOjawbP8J7PUmOynQo7wI2yGCcCyEcVSw/viewform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Partner with us<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://shipped.atlan.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">What&#x27;s new<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://atlan.zendesk.com/auth/v2/login/signin?return_to=https%3A%2F%2Fatlan.zendesk.com%2Fhc%2Fen-us&amp;theme=hc&amp;locale=en-us&amp;brand_id=1900000425113&amp;auth_origin=1900000425113%2Cfalse%2Ctrue" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support portal<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="signInButton_ixSd"><a class="navbar__item navbar__link" href="/support/submit-request">Contact support</a></div><button class="clean-btn mobileMenuButton_ad49" aria-label="Toggle navigation bar"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div></div><div class="menuRow_gXbp"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__item navbar__link" href="/get-started/what-is-atlan">Get started</a><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Connect data<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Use data<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Build governance<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Configure Atlan<span class="nestedDropdownCaret_oaQx"></span></a></div></div><div class="navbar__items navbar__items--right"></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/apps/connectors/data-warehouses/snowflake">Snowflake</a><button aria-label="Collapse sidebar category &#x27;Snowflake&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/snowflake/how-tos/crawl-snowflake">Crawl Snowflake Assets</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/snowflake/how-tos/manage-snowflake-tags">Manage Snowflake in Atlan</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/snowflake/references/multiple-tag-values-and-concatenation">References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-connectivity">Troubleshooting</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-connectivity">Troubleshooting Snowflake connectivity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-tag-management">Troubleshooting Snowflake tag management</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/snowflake/best-practices/snowflake-warehouse-configuration">Best Practices</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Connect data</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Data Warehouses</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/apps/connectors/data-warehouses/snowflake"><span>Snowflake</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Troubleshooting</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Troubleshooting Snowflake connectivity</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Troubleshooting Snowflake connectivity</h1></header><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-debug-test-authentication-and-preflight-check-errors">How to debug test authentication and preflight check errors?<a href="#how-to-debug-test-authentication-and-preflight-check-errors" class="hash-link" aria-label="Direct link to How to debug test authentication and preflight check errors?" title="Direct link to How to debug test authentication and preflight check errors?">â</a></h4>
<p><strong>Missing warehouse grants</strong></p>
<p><code>The user doesnât have USAGE and OPERATE grants on a warehouse.</code></p>
<ul>
<li>
<p><a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">Grant warehouse access to the role</a>:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> OPERATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USAGE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> WAREHOUSE </span><span class="token string" style="color:#e3116c">&quot;&lt;warehouse&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p>Then, ensure that you <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">grant the role to the new user</a>:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> ROLE atlan_user_role </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> atlan_user</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
</ul>
<p><strong>Missing authorized access to SNOWFLAKE.ACCOUNT_USAGE schema</strong></p>
<p><code>The user doesnât have authorized access to the SNOWFLAKE.ACCOUNT_USAGE database</code></p>
<ul>
<li>
<p>Reach out to your account admin to <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">grant imported privileges</a> on the <code>Snowflake</code> database to the role:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">USE</span><span class="token plain"> ROLE ACCOUNTADMIN</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> IMPORTED </span><span class="token keyword" style="color:#00009f">PRIVILEGES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> SNOWFLAKE </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p>If <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">using a copied database</a>, you&#x27;ll need to grant the following permissions:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USAGE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;copied-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USAGE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SCHEMA</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;copied-schema&gt;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;copied-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> VIEWS </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;copied-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
</ul>
<p><strong>Missing usage grants on databases and/or schemas</strong></p>
<p><code>The user doesn&#x27;t have usage grants to the databases ` $missingDatabases ` and schemas ` $missingSchemas</code></p>
<ul>
<li>Grant <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">missing permissions listed here</a> for information schema extraction method.</li>
</ul>
<p><strong>Atlan IP not allowlisted</strong></p>
<p><code>Atlan&#x27;s current location or network isn&#x27;t recognized by Snowflake&#x27;s security settings. This can happen if Atlan&#x27;s IP address isn&#x27;t on the list of allowed addresses in Snowflake&#x27;s network policies.</code></p>
<ul>
<li>If you are using the IP allowlist in your Snowflake instance, you must add the <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">Atlan IP to the allowlist</a>. Contact <a href="/support/submit-request">Atlan support</a> to obtain Atlan&#x27;s IP addresses.</li>
</ul>
<p><strong>Incorrect credentials</strong></p>
<p><code>The username or the password provided to connect to the Snowflake account is incorrect.</code></p>
<ul>
<li>Sign into the Snowflake account for the specified host and verify that the username and password are correct.</li>
<li>You can also create a new user, if required, by following the steps <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">here</a>.</li>
</ul>
<p><strong>Missing or unauthorized role</strong></p>
<p><code>The role specified in your connection configuration doesn&#x27;t exist in Snowflake or your user account doesn&#x27;t have grant to use this role.</code></p>
<ul>
<li>If the role does not exist or is missing the required grants, <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake#create-role">create a role</a> and then <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">grant the role to the user</a>.</li>
</ul>
<p><strong>User account locked</strong></p>
<p><code>The user account you&#x27;re using to connect to Snowflake has been locked temporarily because of multiple incorrect login attempts.</code></p>
<ul>
<li>Wait for the user account to unlock or create a different user account to continue.</li>
</ul>
<p><strong>Missing or unauthorized warehouse</strong></p>
<p><code>The warehouse specified in your connection configuration doesn&#x27;t exist in Snowflake or your user account doesn&#x27;t have grant to use this warehouse.</code></p>
<ul>
<li>
<p>Ensure that the warehouse name is configured correctly.</p>
</li>
<li>
<p>Update the warehouse name in the configuration if your account is using a different warehouse. <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake#create-role">Create a role</a> and then <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">grant the role to the user</a> for the updated warehouse.</p>
</li>
</ul>
<p><strong>Missing access to non-system databases or schemas</strong></p>
<p><code>The configured user doesn&#x27;t have usage grants to any database or schema.</code> or <code>The configured user doesn&#x27;t have usage grants to any non-system database or schema.</code></p>
<ul>
<li>This pertains to the information schema method of fetching metadata. Ensure that the user has authorized access to the databases and schemas to be crawled.</li>
<li>Grant the requisite permissions as outlined <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">here</a>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-are-some-assets-from-a-database-or-schema-missing">Why are some assets from a database or schema missing?<a href="#why-are-some-assets-from-a-database-or-schema-missing" class="hash-link" aria-label="Direct link to Why are some assets from a database or schema missing?" title="Direct link to Why are some assets from a database or schema missing?">â</a></h4>
<ul>
<li>
<p>Check the grants on the role attached to the user defined for the crawler. Ensure the missing database or schema is present in these grants.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SHOW</span><span class="token plain"> GRANTS </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-are-new-tables-or-views-missing">Why are new tables or views missing?<a href="#why-are-new-tables-or-views-missing" class="hash-link" aria-label="Direct link to Why are new tables or views missing?" title="Direct link to Why are new tables or views missing?">â</a></h4>
<ul>
<li>
<p>When using incremental extraction, consider running a one-time full extraction to capture any newly introduced metadata.</p>
</li>
<li>
<p>Make sure the role attached to the user defined for the crawler has grants for future tables and views being created in the database:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USAGE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> FUTURE SCHEMAS </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;database-name&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> FUTURE </span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;database-name&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> FUTURE VIEWS </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;database-name&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> FUTURE EXTERNAL </span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;database-name&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> ROLE atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p>Make sure you run the below commands as well so that new tables and views you&#x27;ve created in-between are also visible to the user:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USAGE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> SCHEMAS </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;database-name&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> role atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;database-name&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> role atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> EXTERNAL </span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;database-name&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> VIEWS </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;database-name&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> role atlan_user_role</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-some-lineage-missing">Why is some lineage missing?<a href="#why-is-some-lineage-missing" class="hash-link" aria-label="Direct link to Why is some lineage missing?" title="Direct link to Why is some lineage missing?">â</a></h4>
<ul>
<li>The query miner only mines query history for up to the previous two weeks. The miner will not mine any queries that ran before that time window. If the queries that created your assets ran before that time window, lineage for those assets will not be present.</li>
<li>To mine more than the previous two weeks of query history, either use <a href="/product/connections/how-tos/mine-queries-through-s3">S3-based query mining</a> or <a href="/support/submit-request">contact Atlan support</a>. Note that Snowflake itself only retains query history for so long as well, though. Once Snowflake itself no longer contains the query history we will be unable to mine it for lineage.</li>
<li>Lineage is unsupported for parameterized queries. Snowflake currently <a href="https://community.snowflake.com/s/article/How-to-rebuild-parameterized-queries-from-bind-variables" target="_blank" rel="noopener noreferrer">does not resolve values</a> for parameterized queries before logging them in query history. This limits Atlan from generating lineage in such cases.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="missing-attributes-and-lineage">Missing attributes and lineage<a href="#missing-attributes-and-lineage" class="hash-link" aria-label="Direct link to Missing attributes and lineage" title="Direct link to Missing attributes and lineage">â</a></h4>
<ul>
<li>When using the account usage extraction method, there are currently some limitations. We are working with Snowflake to find workarounds for crawling the following:<!-- -->
<ul>
<li>External table location data</li>
<li>Procedures</li>
<li>Primary key designation</li>
</ul>
</li>
<li>Furthermore, only database-level filtering is currently possible.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-views-does-atlan-require-access-to-for-the-account-usage-method">What views does Atlan require access to for the account usage method?<a href="#what-views-does-atlan-require-access-to-for-the-account-usage-method" class="hash-link" aria-label="Direct link to What views does Atlan require access to for the account usage method?" title="Direct link to What views does Atlan require access to for the account usage method?">â</a></h4>
<p>When using the <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake#grant-permissions-for-account-usage-method">account usage method</a> for fetching metadata, Atlan requires access to the following views in Snowflake:</p>
<ul>
<li>For the crawler: <code>DATABASES</code>, <code>SCHEMATA</code>, <code>TABLES</code>, <code>VIEWS</code>, <code>COLUMNS</code>, and <code>PIPES</code></li>
<li>For the miner and <a href="/product/capabilities/usage-and-popularity/how-tos/interpret-usage-metrics">popularity metrics</a>: <code>QUERY_HISTORY</code>, <code>ACCESS_HISTORY</code>, and <code>SESSIONS</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-am-i-getting-a-destination-url-mismatch-error-when-authenticating-via-okta-sso">Why am I getting a destination URL mismatch error when authenticating via Okta SSO?<a href="#why-am-i-getting-a-destination-url-mismatch-error-when-authenticating-via-okta-sso" class="hash-link" aria-label="Direct link to Why am I getting a destination URL mismatch error when authenticating via Okta SSO?" title="Direct link to Why am I getting a destination URL mismatch error when authenticating via Okta SSO?">â</a></h4>
<p>This error can occur when you&#x27;re connecting to Snowflake through <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-snowflake">Okta SSO</a> and enter the URL of your Snowflake instance in a format different from the one used in Okta.</p>
<p>Snowflake follows two URL formats:</p>
<ul>
<li>Legacy format   - Â <code>&lt;AccountLocator&gt;.&lt;Region&gt;.snowflakecomputing.com</code> or <code>&lt;AccountLocator&gt;.&lt;Region&gt;.&lt;cloud&gt;.snowflakecomputing.com</code></li>
<li>New URL format   -  <code>&lt;Orgname&gt;-&lt;AccountName&gt;.snowflakecomputing.com</code></li>
</ul>
<p>Ensure that you&#x27;re using the same Snowflake URL format in Snowflake and Okta. Refer to <a href="https://community.snowflake.com/s/article/Destination-URL-mismatch-when-using-Native-OKTA-SSO" target="_blank" rel="noopener noreferrer">Snowflake documentation</a> to learn more.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-am-i-getting-a-name-or-service-not-known-error-when-connecting-via-private-link">Why am I getting a &#x27;name or service not known&#x27; error when connecting via private link?<a href="#why-am-i-getting-a-name-or-service-not-known-error-when-connecting-via-private-link" class="hash-link" aria-label="Direct link to Why am I getting a &#x27;name or service not known&#x27; error when connecting via private link?" title="Direct link to Why am I getting a &#x27;name or service not known&#x27; error when connecting via private link?">â</a></h4>
<p>If you&#x27;re getting the following error messages   -  <code>java.net.UnknownHostException</code> and <code>Name or service not known</code>   -  this is a known error for users who have upgraded to the Snowflake JDBC driver version 3.13.25., have underscores in their account name, and connect to their Snowflake accounts over <a href="/apps/connectors/data-warehouses/snowflake/how-tos/set-up-an-aws-private-network-link-to-snowflake">private link</a> (for example, <code>https://my_account.us-west-2.privatelink.snowflakecomputing.com</code>).</p>
<p>If your Snowflake account name has an underscore   -  for example, <code>my_account</code>   - Â the updated JDBC driver will automatically convert underscores to dashes or hyphens <code>-</code>. This does not affect normal URLs because Snowflake accepts URLs with both hyphens and underscores.</p>
<p>For private link users, however, the JDBC driver will return an error if there are underscores present in the account name and the connection will fail. To troubleshoot further, refer to <a href="https://community.snowflake.com/s/article/Behaviour-Change-Release-information-associated-with-Snowflake-JDBC-driver-version-3-13-25" target="_blank" rel="noopener noreferrer">Snowflake documentation</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/atlan">atlan</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/documentation">documentation</a></li></ul></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/apps/connectors/data-warehouses/snowflake/references/preflight-checks-for-snowflake"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Preflight checks for Snowflake</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/apps/connectors/data-warehouses/snowflake/troubleshooting/troubleshooting-snowflake-tag-management"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Troubleshooting Snowflake tag management</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Atlan Pte. Ltd.</div></div></div></footer><span class="badge_WFAO badge_primary_SeIF" style="cursor:default"></span></div>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e1fb012c627f25',t:'MTc1NzcwNzExNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>