<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Set up on-premises Databricks access | Atlan Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Set up on-premises Databricks access | Atlan Documentation"><meta data-rh="true" name="description" content="In some cases you will not be able to expose your Databricks instance for Atlan to crawl and ingest metadata. For example, this may happen when security requirements restrict access to sensitive, mission-critical data."><meta data-rh="true" property="og:description" content="In some cases you will not be able to expose your Databricks instance for Atlan to crawl and ingest metadata. For example, this may happen when security requirements restrict access to sensitive, mission-critical data."><link data-rh="true" rel="icon" href="/img/atlan.ico"><link data-rh="true" rel="canonical" href="https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access"><link data-rh="true" rel="alternate" href="https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://N7XGBZ1DRU-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Databricks","item":"https://docs.atlan.com/apps/connectors/data-warehouses/databricks/"},{"@type":"ListItem","position":2,"name":"Set up on-premises Databricks access","item":"https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access"}]}</script><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TZTFMW4J",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Atlan Documentation" href="/opensearch.xml">
<script>window.chatbaseConfig={chatbotId:"btNPYbU8VGvFO0WWx3RKy"}</script>
<script src="https://darkvisitors.com/tracker.js?project_key=d507548f-a6ca-4d07-a911-d7ba35b9fec1"></script>
<script src="/scripts/atlan-scout.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.2ae6c2ab.css">
<script src="/assets/js/runtime~main.0b8b8442.js" defer="defer"></script>
<script src="/assets/js/main.8984a2fd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TZTFMW4J" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/atlan-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top customNavbar_Xl4v"><div class="topRow_xtvp"><div class="leftSection_J1NA"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/atlan-logo.svg" alt="Atlan Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="52" width="52"><img src="/img/atlan-logo.svg" alt="Atlan Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="52" width="52"></div><b class="navbar__title text--truncate"></b></a></div><div class="centerSection_aleN"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="rightSection_NZiV"><a href="https://docs.google.com/forms/d/e/1FAIpQLScuAIhCm2GS7YFstrOjawbP8J7PUmOynQo7wI2yGCcCyEcVSw/viewform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Partner with us<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://shipped.atlan.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">What&#x27;s new<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://atlan.zendesk.com/auth/v2/login/signin?return_to=https%3A%2F%2Fatlan.zendesk.com%2Fhc%2Fen-us&amp;theme=hc&amp;locale=en-us&amp;brand_id=1900000425113&amp;auth_origin=1900000425113%2Cfalse%2Ctrue" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support portal<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="signInButton_ixSd"><a class="navbar__item navbar__link" href="/support/submit-request">Contact support</a></div><button class="clean-btn mobileMenuButton_ad49" aria-label="Toggle navigation bar"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div></div><div class="menuRow_gXbp"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__item navbar__link" href="/get-started/what-is-atlan">Get started</a><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Connect data<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Use data<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Build governance<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Configure Atlan<span class="nestedDropdownCaret_oaQx"></span></a></div></div><div class="navbar__items navbar__items--right"></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/apps/connectors/data-warehouses/databricks">Databricks</a><button aria-label="Collapse sidebar category &#x27;Databricks&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-cross-workspace-extraction">Cross-workspace Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/crawl-databricks">Crawl Databricks Assets</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access">On-premises Setup</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access">Set up on-premises Databricks access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/crawl-on-premises-databricks">Crawl on-premises Databricks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-lineage-extraction">Set up on-premises Databricks lineage extraction</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-an-aws-private-network-link-to-databricks">Private Network Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/extract-lineage-and-usage-from-databricks">Lineage and Usage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/manage-databricks-tags">Tag management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/references/what-does-atlan-crawl-from-databricks">References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/troubleshooting/troubleshooting-databricks-connectivity">Troubleshooting</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Connect data</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Data Warehouses</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/apps/connectors/data-warehouses/databricks"><span>Databricks</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">On-premises Setup</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Set up on-premises Databricks access</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Set up on-premises Databricks access</h1></header><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Who can do this?</div><div class="admonitionContent_BuS1"><p>You will need access to a machine that can run Docker on-premises. You will also need your Databricks instance details, including credentials.</p></div></div>
<p>In some cases you will not be able to expose your Databricks instance for Atlan to crawl and ingest metadata. For example, this may happen when security requirements restrict access to sensitive, mission-critical data.</p>
<p>In such cases you may want to decouple the extraction of metadata from its ingestion in Atlan. This approach gives you full control over your resources and metadata transfer to Atlan.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">â</a></h2>
<p>To extract metadata from your on-premises Databricks instance, you will need to use Atlan&#x27;s databricks-extractor tool.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span><strong>Did you know?</strong></div><div class="admonitionContent_BuS1"><p>Atlan uses exactly the same databricks-extractor behind the scenes when it connects to Databricks in the cloud.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-docker-compose">Install Docker Compose<a href="#install-docker-compose" class="hash-link" aria-label="Direct link to Install Docker Compose" title="Direct link to Install Docker Compose">â</a></h3>
<p><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker Compose</a> is a tool for defining and running applications composed of many <a href="https://docs.docker.com/get-started/overview/" target="_blank" rel="noopener noreferrer">Docker</a> containers. (Any guesses where the name came from? ð)</p>
<p>To install Docker Compose:</p>
<ol>
<li><a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">Install Docker</a></li>
<li><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Install Docker Compose</a></li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span><strong>Did you know?</strong></div><div class="admonitionContent_BuS1"><p>Instructions provided in this documentation should be enough even if you are completely new to Docker and Docker Compose. However, you can also walk through the <a href="https://docs.docker.com/compose/gettingstarted/" target="_blank" rel="noopener noreferrer">Get started with Docker Compose</a> tutorial if you want to learn Docker Compose basics first.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-databricks-extractor-tool">Get the databricks-extractor tool<a href="#get-the-databricks-extractor-tool" class="hash-link" aria-label="Direct link to Get the databricks-extractor tool" title="Direct link to Get the databricks-extractor tool">â</a></h3>
<p>To get the databricks-extractor tool:</p>
<ol>
<li>
<p><a href="/support/submit-request">Raise a support ticket</a> to get the link to the latest version.</p>
</li>
<li>
<p>Download the image using the link provided by support.</p>
</li>
<li>
<p>Load the image to the server you&#x27;ll use to crawl Databricks:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker load -i /path/to/databricks-extractor-master.tar</span><br></span></code></pre></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-compose-file">Get the compose file<a href="#get-the-compose-file" class="hash-link" aria-label="Direct link to Get the compose file" title="Direct link to Get the compose file">â</a></h2>
<p>Atlan provides you with a <a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">Docker compose file</a> for the databricks-extractor tool.</p>
<p>To get the compose file:</p>
<ol>
<li>Download the <a href="https://atlan-public.s3.eu-west-1.amazonaws.com/atlan/databricks-extractor/docker-compose.yaml" target="_blank" rel="noopener noreferrer">latest compose file</a>.</li>
<li>Save the file to an empty directory on the server you&#x27;ll use to access your on-premises Databricks instance.</li>
<li>The file is <code>docker-compose.yaml</code>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-databricks-connections">Define Databricks connections<a href="#define-databricks-connections" class="hash-link" aria-label="Direct link to Define Databricks connections" title="Direct link to Define Databricks connections">â</a></h2>
<p>The structure of the compose file includes three main sections:</p>
<ul>
<li><code>x-templates</code> contains configuration fragments. You should ignore this section   -  do not make any changes to it.</li>
<li><code>services</code> is where you will define your Databricks connections.</li>
<li><code>volumes</code> contains mount information. You should ignore this section as well   -  do not make any changes to it.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-services">Define services<a href="#define-services" class="hash-link" aria-label="Direct link to Define services" title="Direct link to Define services">â</a></h3>
<p>For each on-premises Databricks instance, define an entry under <code>services</code> in the compose file.</p>
<p>Each entry will have the following structure:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  connection-name:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;&lt;: *extract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;&lt;: *databricks-defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      INCLUDE_FILTER: &#x27;{&quot;DB_1&quot;: [], &quot;DB_2&quot;: [&quot;SCHEMA_1&quot;, &quot;SCHEMA_2&quot;]}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      EXCLUDE_FILTER: &#x27;{&quot;DB_1&quot;: [&quot;SCHEMA_1&quot;, &quot;SCHEMA_2&quot;]}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      TEMP_TABLE_REGEX: &#x27;.*temp.*|.*tmp.*|.*TEMP.*|.*TMP.*&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SYSTEM_SCHEMA_REGEX: &#x27;^information_schema$&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./output/connection-name:/output</span><br></span></code></pre></div></div>
<ul>
<li>Replace <code>connection-name</code> with the name of your connection.</li>
<li><code>&lt;&lt;: *extract</code> tells the databricks-extractor tool to run.</li>
<li><code>environment</code> contains all parameters for the tool.<!-- -->
<ul>
<li><code>INCLUDE_FILTER</code>   -  specify the databases and schemas from which you want to extract metadata. Remove this line if you want to extract metadata from all databases and schemas.</li>
<li><code>EXCLUDE_FILTER</code>   -  specify the databases and schemas you want to exclude from metadata extraction. This will take precedence over <code>INCLUDE_FILTER</code>. Remove this line if you do not want to exclude any databases or schemas.</li>
<li><code>TEMP_TABLE_REGEX</code>   -  specify a regular expression for excluding temporary tables. Remove this line if you do not want to exclude any temporary tables.</li>
<li><code>SYSTEM_SCHEMA_REGEX</code>   -  specify a regular expression for excluding system schemas. If unspecified, <code>INFORMATION_SCHEMA</code> will be excluded from the extracted metadata by default.</li>
</ul>
</li>
<li><code>volumes</code> specifies where to store results. In this example, the extractor will store results in the <code>./output/connection-name</code> folder on the local file system.</li>
</ul>
<p>You can add as many Databricks connections as you want.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span><strong>Did you know?</strong></div><div class="admonitionContent_BuS1"><p><a href="https://docs.docker.com/compose/compose-file/#services-top-level-element" target="_blank" rel="noopener noreferrer">Docker&#x27;s documentation</a> describes the <code>services</code> format in more detail.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="provide-credentials">Provide credentials<a href="#provide-credentials" class="hash-link" aria-label="Direct link to Provide credentials" title="Direct link to Provide credentials">â</a></h2>
<p>To define the credentials for your Databricks connections, you will need to provide a Databricks configuration file.</p>
<p>The Databricks configuration is a <code>.ini</code> file with the following format:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[DatabricksConfig]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host = &lt;host&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">port = &lt;port&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># seconds to wait for a response from the server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">timeout = 300</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Databricks authentication type. Options: personal_access_token, aws_service_principal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth_type = personal_access_token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Required only if auth_type is personal_access_token.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[PersonalAccessTokenAuth]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">personal_access_token = &lt;personal_access_token&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Required only if auth_type is aws_service_principal.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[AWSServicePrincipalAuth]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client_id = &lt;client_id&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client_secret = &lt;client_secret&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="secure-credentials">Secure credentials<a href="#secure-credentials" class="hash-link" aria-label="Direct link to Secure credentials" title="Direct link to Secure credentials">â</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-local-files">Using local files<a href="#using-local-files" class="hash-link" aria-label="Direct link to Using local files" title="Direct link to Using local files">â</a></h3>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>If you decide to keep Databricks credentials in plaintext files, we recommend you restrict access to the directory and the compose file. For extra security, we recommend you use <a href="https://docs.docker.com/engine/swarm/secrets/" target="_blank" rel="noopener noreferrer">Docker secrets</a> to store the sensitive passwords.</p></div></div>
<p>To specify the local files in your compose file:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">secrets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  databricks_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    file: ./databricks.ini</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>This <code>secrets</code> section is at the same top-level as the <code>services</code> section described earlier. It is not a sub-section of the <code>services</code> section.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-docker-secrets">Using Docker secrets<a href="#using-docker-secrets" class="hash-link" aria-label="Direct link to Using Docker secrets" title="Direct link to Using Docker secrets">â</a></h3>
<p>To create and use Docker secrets:</p>
<ol>
<li>
<p>Store the Databricks configuration file:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo docker secret create databricks_config path/to/databricks.ini</span><br></span></code></pre></div></div>
</li>
<li>
<p>At the top of your compose file, add a <a href="https://docs.docker.com/compose/compose-file/compose-file-v3/#secrets-configuration-reference" target="_blank" rel="noopener noreferrer">secrets</a> element to access your secret:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">secrets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  databricks_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: databricks_config</span><br></span></code></pre></div></div>
<ul>
<li>The <code>name</code> should be the same one you used in the <code>docker secret create</code> command above.</li>
<li>Once stored as a Docker secret, you can remove the local Databricks configuration file.</li>
</ul>
</li>
<li>
<p>Within the <code>service</code> section of the compose file, add a new secrets element and specify the name of the secret within your service to use it.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">â</a></h2>
<p>Let&#x27;s explain in detail with an example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">secrets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  databricks_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    external: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: databricks_config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x-templates:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  databricks-example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;&lt;: *extract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;&lt;: *databricks-defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      INCLUDE_FILTER: &#x27;{&quot;DB_1&quot;: [], &quot;DB_2&quot;: [&quot;SCHEMA_1&quot;, &quot;SCHEMA_2&quot;]}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      EXCLUDE_FILTER: &#x27;{&quot;DB_1&quot;: [&quot;SCHEMA_1&quot;, &quot;SCHEMA_2&quot;]}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      TEMP_TABLE_REGEX: &#x27;.*temp.*|.*tmp.*|.*TEMP.*|.*TMP.*&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SYSTEM_SCHEMA_REGEX: &#x27;^information_schema$&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./output/databricks-example:/output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    secrets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - databricks_config</span><br></span></code></pre></div></div>
<ol>
<li>In this example, we&#x27;ve defined the secrets at the top of the file (you could also define them at the bottom). The <code>databricks_config</code> refers to an external Docker secret created using the <code>docker secret create</code> command.</li>
<li>The name of this service is <code>databricks-example</code>. You can use any meaningful name you want.</li>
<li>The <code>&lt;&lt;: *databricks-defaults</code> sets the connection type to Databricks.</li>
<li>The <code>./output/databricks-example:/output</code>Â line tells the extractor where to store results. In this example, the extractor will store results in theÂ <code>./output/databricks-example</code>directory on the local file system. We recommend you output the extracted metadata for different connections in separate directories.</li>
<li>The <code>secrets</code> section within <code>services</code> tells the extractor which secrets to use for this service. Each of these refers to the name of a secret listed at the beginning of the compose file.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/data">data</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/crawl">crawl</a></li></ul></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/apps/connectors/data-warehouses/databricks/how-tos/crawl-databricks"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Crawl Databricks</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/apps/connectors/data-warehouses/databricks/how-tos/crawl-on-premises-databricks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Crawl on-premises Databricks</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#get-the-compose-file" class="table-of-contents__link toc-highlight">Get the compose file</a></li><li><a href="#define-databricks-connections" class="table-of-contents__link toc-highlight">Define Databricks connections</a></li><li><a href="#provide-credentials" class="table-of-contents__link toc-highlight">Provide credentials</a></li><li><a href="#secure-credentials" class="table-of-contents__link toc-highlight">Secure credentials</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Atlan Pte. Ltd.</div></div></div></footer><span class="badge_WFAO badge_primary_SeIF" style="cursor:default"></span></div>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e1fb4cee4ca92b',t:'MTc1NzcwNzEyNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>