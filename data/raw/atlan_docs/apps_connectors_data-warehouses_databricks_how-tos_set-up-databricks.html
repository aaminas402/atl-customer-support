<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Set up Databricks | Atlan Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Set up Databricks | Atlan Documentation"><meta data-rh="true" name="description" content="Atlan supports three authentication methods for fetching metadata from Databricks. You can set up any of the following authentication methods:."><meta data-rh="true" property="og:description" content="Atlan supports three authentication methods for fetching metadata from Databricks. You can set up any of the following authentication methods:."><link data-rh="true" rel="icon" href="/img/atlan.ico"><link data-rh="true" rel="canonical" href="https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks"><link data-rh="true" rel="alternate" href="https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://N7XGBZ1DRU-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Databricks","item":"https://docs.atlan.com/apps/connectors/data-warehouses/databricks/"},{"@type":"ListItem","position":2,"name":"Set up Databricks","item":"https://docs.atlan.com/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks"}]}</script><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TZTFMW4J",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Atlan Documentation" href="/opensearch.xml">
<script>window.chatbaseConfig={chatbotId:"btNPYbU8VGvFO0WWx3RKy"}</script>
<script src="https://darkvisitors.com/tracker.js?project_key=d507548f-a6ca-4d07-a911-d7ba35b9fec1"></script>
<script src="/scripts/atlan-scout.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.2ae6c2ab.css">
<script src="/assets/js/runtime~main.0b8b8442.js" defer="defer"></script>
<script src="/assets/js/main.8984a2fd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TZTFMW4J" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/atlan-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top customNavbar_Xl4v"><div class="topRow_xtvp"><div class="leftSection_J1NA"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/atlan-logo.svg" alt="Atlan Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="52" width="52"><img src="/img/atlan-logo.svg" alt="Atlan Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="52" width="52"></div><b class="navbar__title text--truncate"></b></a></div><div class="centerSection_aleN"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="rightSection_NZiV"><a href="https://docs.google.com/forms/d/e/1FAIpQLScuAIhCm2GS7YFstrOjawbP8J7PUmOynQo7wI2yGCcCyEcVSw/viewform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Partner with us<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://shipped.atlan.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">What&#x27;s new<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://atlan.zendesk.com/auth/v2/login/signin?return_to=https%3A%2F%2Fatlan.zendesk.com%2Fhc%2Fen-us&amp;theme=hc&amp;locale=en-us&amp;brand_id=1900000425113&amp;auth_origin=1900000425113%2Cfalse%2Ctrue" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support portal<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="signInButton_ixSd"><a class="navbar__item navbar__link" href="/support/submit-request">Contact support</a></div><button class="clean-btn mobileMenuButton_ad49" aria-label="Toggle navigation bar"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div></div><div class="menuRow_gXbp"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__item navbar__link" href="/get-started/what-is-atlan">Get started</a><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Connect data<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Use data<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Build governance<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Configure Atlan<span class="nestedDropdownCaret_oaQx"></span></a></div></div><div class="navbar__items navbar__items--right"></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/apps/connectors/data-warehouses/databricks">Databricks</a><button aria-label="Collapse sidebar category &#x27;Databricks&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks">Get Started</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks">Set up Databricks</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-cross-workspace-extraction">Cross-workspace Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/crawl-databricks">Crawl Databricks Assets</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-on-premises-databricks-access">On-premises Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-an-aws-private-network-link-to-databricks">Private Network Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/extract-lineage-and-usage-from-databricks">Lineage and Usage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/how-tos/manage-databricks-tags">Tag management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/references/what-does-atlan-crawl-from-databricks">References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/apps/connectors/data-warehouses/databricks/troubleshooting/troubleshooting-databricks-connectivity">Troubleshooting</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Connect data</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Data Warehouses</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/apps/connectors/data-warehouses/databricks"><span>Databricks</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Get Started</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Set up Databricks</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Set up Databricks</h1></header><p>Atlan supports three authentication methods for fetching metadata from Databricks. You can set up any of the following authentication methods:</p>
<ul>
<li><a href="#personal-access-token-authentication">Personal access token authentication</a></li>
<li><a href="#aws-service-principal-authentication">AWS service principal authentication</a></li>
<li><a href="#azure-service-principal-authentication">Azure service principal authentication</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="personal-access-token-authentication">Personal access token authentication<a href="#personal-access-token-authentication" class="hash-link" aria-label="Direct link to Personal access token authentication" title="Direct link to Personal access token authentication">â</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Who can do this?</div><div class="admonitionContent_BuS1"><p>Check that you have <em>Admin</em> and <em>Databricks SQL access</em> for the Databricks workspace. This is required for both cluster options described below. If you don&#x27;t have this access, contact your Databricks administrator.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grant-user-access-to-workspace">Grant user access to workspace<a href="#grant-user-access-to-workspace" class="hash-link" aria-label="Direct link to Grant user access to workspace" title="Direct link to Grant user access to workspace">â</a></h3>
<p>To grant workspace access to the user creating a personal access token:</p>
<ol>
<li>From the left menu of the account console, click <strong>Workspaces</strong> and then select a workspace to which you want to add the user.</li>
<li>From the tabs along the top of your workspace page, click the <strong>Permissions</strong> tab.</li>
<li>In the upper right of the <em>Permissions</em> page, click <strong>Add permissions</strong>.</li>
<li>In the <em>Add permissions</em> dialog, enter the following details:<!-- -->
<ol>
<li>For <em>User, group, or service principal</em>, select the user to grant access.</li>
<li>For <em>Permission</em>, click the dropdown and select workspace <strong>User.</strong></li>
</ol>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-a-personal-access-token">Generate a personal access token<a href="#generate-a-personal-access-token" class="hash-link" aria-label="Direct link to Generate a personal access token" title="Direct link to Generate a personal access token">â</a></h3>
<p>You can <a href="https://docs.databricks.com/en/dev-tools/auth/pat.html#databricks-personal-access-tokens-for-workspace-users" target="_blank" rel="noopener noreferrer">generate a personal access token</a> in your Databricks workspace to the authenticate the <a href="/apps/connectors/data-warehouses/databricks/how-tos/crawl-databricks">integration in Atlan</a>.</p>
<p>To generate a personal access token:</p>
<ol>
<li>From the top right of your Databricks workspace, click your Databricks username, and then from the dropdown, click <strong>User</strong> <strong>Settings</strong>.</li>
<li>Under the <em>Settings</em> menu, click <strong>Developer</strong>.</li>
<li>On the <em>Developer</em> page, next to <em>Access tokens</em>, click <strong>Manage</strong>.</li>
<li>On the <em>Access tokens</em> page, click the <strong>Generate new token</strong> button.</li>
<li>In the <em>Generate new token</em> dialog:<!-- -->
<ol>
<li>
<p>For <em>Comment</em>, enter a description of the token&#x27;s intended use - for example, <code>Atlan crawler</code>.</p>
</li>
<li>
<p>For <em>Lifetime (days)</em>, consider removing the number. This enables the token to be used indefinitely - it won&#x27;t need to be refreshed.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Important!</div><div class="admonitionContent_BuS1"><p>If you do enter a number, remember that you need to periodically regenerate it and update Atlan&#x27;s crawler configuration with the new token each time.</p></div></div>
</li>
<li>
<p>At the bottom of the dialog, click <strong>Generate</strong>.</p>
</li>
</ol>
</li>
<li>Copy and save the generated token in a secure location, and then click <strong>Done</strong>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="select-a-cluster">Select a cluster<a href="#select-a-cluster" class="hash-link" aria-label="Direct link to Select a cluster" title="Direct link to Select a cluster">â</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span><strong>Did you know?</strong></div><div class="admonitionContent_BuS1"><p>Atlan recommends using serverless SQL warehouses for instant compute availability. To enable serverless SQL warehouses, refer to <a href="https://docs.databricks.com/en/admin/sql/serverless.html" target="_blank" rel="noopener noreferrer">Databricks documentation</a> for AWS Databricks workspaces or <a href="https://learn.microsoft.com/en-us/azure/databricks/admin/sql/serverless" target="_blank" rel="noopener noreferrer">Microsoft documentation</a> for Azure Databricks workspaces.</p></div></div>
<p>You can set up personal access token authentication for your Databricks instance using one of the following cluster options:</p>
<ul>
<li>Interactive cluster</li>
<li>SQL warehouse (formerly SQL endpoint)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="interactive-cluster">Interactive cluster<a href="#interactive-cluster" class="hash-link" aria-label="Direct link to Interactive cluster" title="Direct link to Interactive cluster">â</a></h4>
<p>To confirm an <a href="https://docs.databricks.com/clusters/index.html" target="_blank" rel="noopener noreferrer">all-purpose interactive cluster</a> is configured:</p>
<ol>
<li>From the left menu of any page of your Databricks instance, click <strong>Compute</strong>.</li>
<li>Under the <em>All-purpose clusters</em> tab, verify you have a cluster defined.</li>
<li>Click the link under the <em>Name</em> column of the table to open your cluster.</li>
<li>Under the <em>Configuration</em> tab, verify the <em>Autopilot options</em> to <em>Terminate after ... minutes</em> is enabled.</li>
<li>At the bottom of the <em>Configuration</em> tab, expand the <strong>Advanced options</strong> expandable.<!-- -->
<ol>
<li>Under the <em>Advanced options</em> expandable, open the <strong>JDBC/ODBC</strong> tab.</li>
<li>Confirm that all of the fields in this tab are populated, and copy them for use in crawling: <em>Server Hostname</em>, <em>Port</em>, and <em>HTTP Path</em>.</li>
</ol>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sql-warehouse-formerly-sql-endpoint">SQL warehouse (formerly SQL endpoint)<a href="#sql-warehouse-formerly-sql-endpoint" class="hash-link" aria-label="Direct link to SQL warehouse (formerly SQL endpoint)" title="Direct link to SQL warehouse (formerly SQL endpoint)">â</a></h4>
<p>To confirm a <a href="https://docs.databricks.com/en/compute/sql-warehouse/index.html" target="_blank" rel="noopener noreferrer">SQL warehouse</a> is configured:</p>
<ol>
<li>From the left menu of any page of your Databricks instance, open the dropdown just below the <em>databricks</em> logo and change to <strong>SQL</strong>.</li>
<li>From the refreshed left menu, click <strong>SQL Warehouses</strong>.</li>
<li>Click the link under the <em>Name</em> column of the table to open your SQL warehouse.</li>
<li>Under the <strong>Connection details</strong> tab, confirm that all of the fields are populated and copy them for use in crawling: <em>Server hostname</em>, <em>Port</em>, and <em>HTTP path</em>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aws-service-principal-authentication">AWS service principal authentication<a href="#aws-service-principal-authentication" class="hash-link" aria-label="Direct link to AWS service principal authentication" title="Direct link to AWS service principal authentication">â</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Who can do this?</div><div class="admonitionContent_BuS1"><p>You need your <a href="https://docs.databricks.com/en/administration-guide/users-groups/service-principals.html#who-can-manage-and-use-service-principals" target="_blank" rel="noopener noreferrer">AWS Databricks account admin</a> to create a service principal and manage OAuth credentials for the service principal and your <a href="https://docs.databricks.com/en/administration-guide/users-groups/service-principals.html#who-can-manage-and-use-service-principals" target="_blank" rel="noopener noreferrer">AWS Databricks workspace admin</a> to add the service principal to your AWS Databricks workspace - you may not have access yourself.</p></div></div>
<p>You need the following to authenticate the connection in Atlan:</p>
<ul>
<li>Client ID</li>
<li>Client secret</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-service-principal">Create a service principal<a href="#create-a-service-principal" class="hash-link" aria-label="Direct link to Create a service principal" title="Direct link to Create a service principal">â</a></h3>
<p>You can create a service principal directly in your Databricks account or from a Databricks workspace.</p>
<ul>
<li>Identity federation enabled on your workspaces: Databricks recommends creating the service principal in the account and assigning it to workspaces.</li>
<li>Identity federation disabled on your workspaces: Databricks recommends that you create your service principal from a workspace.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="identity-federation-enabled">Identity federation enabled<a href="#identity-federation-enabled" class="hash-link" aria-label="Direct link to Identity federation enabled" title="Direct link to Identity federation enabled">â</a></h4>
<p>To create a service principal from your Databricks account, with identify federation enabled:</p>
<ol>
<li>Log in to your Databricks <a href="https://accounts.cloud.databricks.com/" target="_blank" rel="noopener noreferrer">account console</a> as an account admin.</li>
<li>From the left menu of the account console, click <strong>User management</strong>.</li>
<li>From the tabs along the top of the <em>User management</em> page, click the <strong>Service principals</strong> tab.</li>
<li>In the upper right of the <em>Service principals</em> page, click <strong>Add service principal</strong>.</li>
<li>On the <em>Add service principal</em> page, enter a name for the service principal and then click <strong>Add</strong>.</li>
<li>Once the service principal has been created, you can assign it to your identity federated workspace. From the left menu of the account console, click <strong>Workspaces</strong> and then select a workspace to which you want to add the service principal.</li>
<li>From the tabs along the top of your workspace page, click the <strong>Permissions</strong> tab.</li>
<li>In the upper right of the <em>Permissions</em> page, click <strong>Add permissions</strong>.</li>
<li>In the <em>Add permissions</em> dialog, enter the following details:<!-- -->
<ol>
<li>For <em>User, group, or service principal</em>, select the service principal you created.</li>
<li>For <em>Permission</em>, click the dropdown and select workspace <strong>User.</strong></li>
</ol>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="identity-federation-disabled">Identity federation disabled<a href="#identity-federation-disabled" class="hash-link" aria-label="Direct link to Identity federation disabled" title="Direct link to Identity federation disabled">â</a></h4>
<p>To create a service principal from a Databricks workspace, with identity federation disabled:</p>
<ol>
<li>Log in to your AWS Databricks workspace as a workspace admin.</li>
<li>From the top right of your workspace, click your username, and then from the dropdown, click <strong>Admin Settings</strong>.</li>
<li>In the left menu of the <em>Settings</em> page, under the <em>Workspace admin</em> subheading, click <strong>Identity and access</strong>.</li>
<li>On the <em>Identity and access</em> page, under <em>Management and permissions</em>, next to <em>Service principals</em>, click <strong>Manage</strong>.</li>
<li>In the upper right of the <em>Service principals</em> page, click <strong>Add service principal</strong>.</li>
<li>In the <em>Add service principal</em> dialog, click the <strong>Add new</strong> button.</li>
<li>For <em>New service principal display name</em>, enter a name for the service principal and then click <strong>Add</strong>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-oauth-secret-for-the-service-principal">Create an OAuth secret for the service principal<a href="#create-an-oauth-secret-for-the-service-principal" class="hash-link" aria-label="Direct link to Create an OAuth secret for the service principal" title="Direct link to Create an OAuth secret for the service principal">â</a></h3>
<p>You need to create an OAuth secret to authenticate to Databricks REST APIs.</p>
<p>To create an OAuth secret for the <a href="#create-a-service-principal">service principal</a>:</p>
<ol>
<li>
<p>Log in to your Databricks <a href="https://accounts.cloud.databricks.com/" target="_blank" rel="noopener noreferrer">account console</a> as an account admin.</p>
</li>
<li>
<p>From the left menu of the account console, click <strong>User management</strong>.</p>
</li>
<li>
<p>From the tabs along the top of the <em>User management</em> page, click the <strong>Service principals</strong> tab.</p>
</li>
<li>
<p>In the upper right of the <em>Service principals</em> page, select the <a href="#create-a-service-principal">service principal you created</a>.</p>
</li>
<li>
<p>On the service principal page, under <em>OAuth secrets</em>, click <strong>Generate secret</strong>.</p>
</li>
<li>
<p>From the <em>Generate secret</em> dialog, copy the <em>Secret</em> and <em>Client ID</em> and store it in a secure location.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Note that this secret is only revealed once during creation. The client ID is the same as the application ID of the service principal.</p></div></div>
</li>
<li>
<p>Once you&#x27;ve copied the client ID and secret, click <strong>Done</strong>.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="azure-service-principal-authentication">Azure service principal authentication<a href="#azure-service-principal-authentication" class="hash-link" aria-label="Direct link to Azure service principal authentication" title="Direct link to Azure service principal authentication">â</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Who can do this?</div><div class="admonitionContent_BuS1"><p>You need your <a href="https://learn.microsoft.com/en-us/azure/databricks/administration-guide/users-groups/service-principals#--who-can-manage-and-use-service-principals" target="_blank" rel="noopener noreferrer">Azure Databricks account admin</a> to create a service principal and your <a href="https://learn.microsoft.com/en-us/azure/databricks/administration-guide/users-groups/service-principals#--who-can-manage-and-use-service-principals" target="_blank" rel="noopener noreferrer">Azure Databricks workspace admin</a> to add the service principal to your Azure Databricks workspace - you may not have access yourself.</p></div></div>
<p>You need the following to authenticate the connection in Atlan:</p>
<ul>
<li>Client ID (application ID)</li>
<li>Client secret</li>
<li>Tenant ID (directory ID)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-service-principal-1">Create a service principal<a href="#create-a-service-principal-1" class="hash-link" aria-label="Direct link to Create a service principal" title="Direct link to Create a service principal">â</a></h3>
<p>To <a href="https://learn.microsoft.com/en-us/azure/databricks/administration-guide/users-groups/service-principals#--manage-service-principals-in-your-account" target="_blank" rel="noopener noreferrer">use service principals on Azure Databricks</a>, an admin user must create a new Microsoft Entra ID (formerly Azure Active Directory) application and then add it to the Azure Databricks workspace to use as a service principal.</p>
<p>To create a service principal:</p>
<ol>
<li>Sign in to the <a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer">Azure portal</a>.</li>
<li>If you have access to multiple tenants, subscriptions, or directories, click the <strong>Directories + subscriptions</strong> (directory with filter) icon in the top menu to switch to the directory in which you want to create the service principal.</li>
<li>In_Search resources, services, and docs_, search for and select<strong>Microsoft Entra ID</strong>.</li>
<li>Click**+ Add<strong>and select</strong>App registration**.</li>
<li>For_Name_, enter a name for the application.</li>
<li>In the_Supported account types_section, select<strong>Accounts in this organizational directory only (Single tenant)</strong> and then click <strong>Register</strong>.</li>
<li>On the application page&#x27;s_Overview_page, in the_Essentials_section, copy and store the following values in a secure location:<!-- -->
<ul>
<li><em>Application (client) ID</em></li>
<li><em>Directory (tenant) ID</em></li>
</ul>
</li>
<li>To generate a client secret, within_Manage_, click<strong>Certificates &amp; secrets</strong>.</li>
<li>On the_Client secrets_tab, click<strong>New client secret</strong>.</li>
<li>In the_Add a client secret_dialog, enter the following details:</li>
<li>For <em>Description</em>, enter a description for the client secret.</li>
<li>For_Expires_, select an expiry time period for the client secret and then click <strong>Add</strong>.</li>
<li>Copy and store the client secret&#x27;s_Value_in a secure place.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-a-service-principal-to-your-account">Add a service principal to your account<a href="#add-a-service-principal-to-your-account" class="hash-link" aria-label="Direct link to Add a service principal to your account" title="Direct link to Add a service principal to your account">â</a></h3>
<p>To add a service principal to your Azure Databricks account:</p>
<ol>
<li>Log in to your <a href="https://accounts.azuredatabricks.net/login" target="_blank" rel="noopener noreferrer">Azure Databricks account console</a> as an account admin.</li>
<li>From the left menu of the account console, click <strong>User management</strong>.</li>
<li>From the tabs along the top of the <em>User management</em> page, click the <strong>Service principals</strong> tab.</li>
<li>In the upper right of the <em>Service principals</em> page, click <strong>Add service principal</strong>.</li>
<li>On the <em>Add service principal</em> page, enter a name for the service principal.</li>
<li>Under <em>UUID</em>, paste the <strong>Application (client) ID</strong> for the service principal.</li>
<li>Click <strong>Add</strong>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assign-a-service-principal-to-a-workspace">Assign a service principal to a workspace<a href="#assign-a-service-principal-to-a-workspace" class="hash-link" aria-label="Direct link to Assign a service principal to a workspace" title="Direct link to Assign a service principal to a workspace">â</a></h3>
<p>To add users to a workspace using the account console, the workspace must be enabled for identity federation. Workspace admins can also assign service principals to workspaces using the workspace admin settings page.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="identity-federation-enabled-1">Identity federation enabled<a href="#identity-federation-enabled-1" class="hash-link" aria-label="Direct link to Identity federation enabled" title="Direct link to Identity federation enabled">â</a></h4>
<p>To assign a service principal to your Azure Databricks account:</p>
<ol>
<li>Log in to your Databricks <a href="https://accounts.cloud.databricks.com/" target="_blank" rel="noopener noreferrer">account console</a> as an account admin.</li>
<li>From the left menu of the account console, click <strong>Workspaces</strong> and then select a workspace to which you want to add the service principal.</li>
<li>From the tabs along the top of your workspace page, click the <strong>Permissions</strong> tab.</li>
<li>In the upper right of the <em>Permissions</em> page, click <strong>Add permissions</strong>.</li>
<li>In the <em>Add permissions</em> dialog, enter the following details:<!-- -->
<ol>
<li>For <em>User, group, or service principal</em>, select the <a href="#create-a-service-principal-1">service principal</a> you created.</li>
<li>For <em>Permission</em>, click the dropdown to select workspace <strong>User</strong>.</li>
</ol>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="identity-federation-disabled-1">Identity federation disabled<a href="#identity-federation-disabled-1" class="hash-link" aria-label="Direct link to Identity federation disabled" title="Direct link to Identity federation disabled">â</a></h4>
<p>To assign a service principal to your Azure Databricks workspace:</p>
<ol>
<li>Log in to your Azure Databricks workspace as a workspace admin.</li>
<li>From the top right of your workspace, click your username, and then from the dropdown, click <strong>Admin Settings</strong>.</li>
<li>In the left menu of the <em>Settings</em> page, under the <em>Workspace admin</em> subheading, click <strong>Identity and access</strong>.</li>
<li>On the <em>Identity and access</em> page, under <em>Management and permissions</em>, next to <em>Service principals</em>, click <strong>Manage</strong>.</li>
<li>In the upper right of the <em>Service principals</em> page, click <strong>Add service principal</strong>.</li>
<li>In the <em>Add service principal</em> dialog, click the <strong>Add new</strong> button.</li>
<li>For <em>New service principal display name</em>, paste the <em>Application (client) ID</em> for the <a href="#create-a-service-principal-1">service principal</a>, enter a display name, and then click <strong>Add</strong>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="grant-permissions-to-crawl-metadata">Grant permissions to crawl metadata<a href="#grant-permissions-to-crawl-metadata" class="hash-link" aria-label="Direct link to Grant permissions to crawl metadata" title="Direct link to Grant permissions to crawl metadata">â</a></h2>
<p>You must have a Unity Catalog-enabled Databricks workspace to crawl metadata in Atlan.</p>
<p>To extract metadata, you can grant the <a href="https://docs.databricks.com/en/data-governance/unity-catalog/manage-privileges/privileges.html#browse" target="_blank" rel="noopener noreferrer">BROWSE privilege</a>, currently in public preview. You no longer require the <em>Data Reader</em> preset that granted the following privileges on objects in the catalog - <code>USE CATALOG</code>, <code>USE SCHEMA</code>, <code>EXECUTE</code>, <code>READ VOLUME</code>, and <code>SELECT</code>.</p>
<p>To grant permissions to a user or service principal:</p>
<ol>
<li>Log in to your Databricks workspace as a workspace admin.</li>
<li>From the left menu of your workspace, click <strong>Catalog</strong>.</li>
<li>In the left menu of the <em>Catalog Explorer</em> page, select the catalog you want to crawl in Atlan.</li>
<li>From the tabs along the top of your workspace page, click the <strong>Permissions</strong> tab and then click the <strong>Grant</strong> button.</li>
<li>In the <em>Grant on (workspace name)</em> dialog, configure the following:<!-- -->
<ol>
<li>Under <em>Principals</em>, click the dropdown and then select the user or service principal.</li>
<li>Under <em>Privileges</em>, check the <strong>BROWSE</strong> privilege.</li>
<li>At the bottom of the dialog, click <strong>Grant</strong>.</li>
</ol>
</li>
<li>(Optional) Repeat steps 3-5 for each catalog you want to crawl in Atlan.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-tables-extraction-method">System tables extraction method<a href="#system-tables-extraction-method" class="hash-link" aria-label="Direct link to System tables extraction method" title="Direct link to System tables extraction method">â</a></h3>
<p>To crawl metadata via system tables, you must have a Unity Catalog-enabled workspace and a configured SQL warehouse. Follow these steps to extract metadata using system tables:</p>
<ol>
<li>
<p>Create one of the following authentication methods:</p>
<ul>
<li><a href="#personal-access-token-authentication">Personal access token</a></li>
<li><a href="#aws-service-principal-authentication">AWS service principal</a></li>
<li><a href="#azure-service-principal-authentication">Azure service principal</a></li>
</ul>
</li>
<li>
<p>Grant the following privileges to the identity you created:</p>
<ul>
<li><code>CAN_USE</code> on a SQL warehouse</li>
<li><code>USE CATALOG</code> on <code>system</code> catalog</li>
<li><code>USE SCHEMA</code> on <code>system.information_schema</code></li>
<li><code>SELECT</code> on the following tables:<!-- -->
<ul>
<li><code>system.information_schema.catalogs</code></li>
<li><code>system.information_schema.schemata</code></li>
<li><code>system.information_schema.tables</code></li>
<li><code>system.information_schema.columns</code></li>
<li><code>system.information_schema.key_column_usage</code></li>
<li><code>system.information_schema.table_constraints</code></li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cross-workspace-extraction">Cross-workspace extraction<a href="#cross-workspace-extraction" class="hash-link" aria-label="Direct link to Cross-workspace extraction" title="Direct link to Cross-workspace extraction">â</a></h3>
<p>To crawl metadata from all workspaces within a Databricks metastore using a single connection, see <a href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-cross-workspace-extraction">Set up cross-workspace extraction</a> for instructions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-grant-permissions-to-query-and-preview-data">(Optional) Grant permissions to query and preview data<a href="#optional-grant-permissions-to-query-and-preview-data" class="hash-link" aria-label="Direct link to (Optional) Grant permissions to query and preview data" title="Direct link to (Optional) Grant permissions to query and preview data">â</a></h2>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Atlan currently only supports <a href="/product/capabilities/insights/how-tos/query-data">querying data</a> and <a href="/product/capabilities/discovery/references/provide-credentials-to-view-sample-data">viewing sample data preview</a> for the <a href="#personal-access-token-authentication">personal access token</a> authentication method.</p></div></div>
<p>To grant permissions to query data and preview example data:</p>
<ol>
<li>Log in to your Databricks workspace as a workspace admin.</li>
<li>From the left menu of your workspace, click <strong>Catalog</strong>.</li>
<li>In the left menu of the <em>Catalog Explorer</em> page, select the catalog you want to query and preview data from in Atlan.</li>
<li>From the tabs along the top of your workspace page, click the <strong>Permissions</strong> tab and then click the <strong>Grant</strong> button.</li>
<li>In the <em>Grant on (workspace name)</em> dialog, configure the following:<!-- -->
<ol>
<li>Under <em>Principals</em>, click the dropdown and then select the user or service principal.</li>
<li>Under <em>Privilege presets</em>, click the dropdown and then click <strong>Data Reader</strong> to enable read-only access to the catalog. Doing so automatically selects the following privileges - <code>USE CATALOG</code>, <code>USE SCHEMA</code>, <code>EXECUTE</code>, <code>READ VOLUME</code>, and <code>SELECT</code>.</li>
<li>At the bottom of the dialog, click <strong>Grant</strong>.</li>
</ol>
</li>
<li>(Optional) Repeat steps 3-5 for each catalog you want to query and preview data from in Atlan.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-grant-permissions-to-import-and-update-tags">(Optional) Grant permissions to import and update tags<a href="#optional-grant-permissions-to-import-and-update-tags" class="hash-link" aria-label="Direct link to (Optional) Grant permissions to import and update tags" title="Direct link to (Optional) Grant permissions to import and update tags">â</a></h2>
<p>To <a href="/apps/connectors/data-warehouses/databricks/how-tos/manage-databricks-tags">import Databricks tags</a>, you must have a Unity Catalog-enabled workspace and a SQL warehouse configured. Atlan supports importing Databricks tags using system tables for all three authentication methods.</p>
<p>Once you have created a <a href="#personal-access-token-authentication">personal access token</a>, an <a href="#aws-service-principal-authentication">AWS service principal</a>, or an <a href="#azure-service-principal-authentication">Azure service principal</a>, you will need to grant the following privileges:</p>
<ul>
<li><code>CAN_USE</code> on a SQL warehouse</li>
<li><code>USE CATALOG</code> on <code>system catalog</code></li>
<li><code>USE SCHEMA</code>on <code>system.information_schema</code></li>
<li><code>SELECT</code> on the following tables:<!-- -->
<ul>
<li><code>system.information_schema.catalog_tags</code></li>
<li><code>system.information_schema.schema_tags</code></li>
<li><code>system.information_schema.table_tags</code></li>
<li><code>system.information_schema.column_tags</code></li>
</ul>
</li>
</ul>
<p>To push tags updated for assets in Atlan to Databricks, you need to grant the following <a href="https://docs.databricks.com/en/database-objects/tags.html#requirements" target="_blank" rel="noopener noreferrer">privileges</a>:</p>
<ul>
<li><code>APPLY TAG</code> on the object</li>
<li><code>USE CATALOG</code> on the object&#x27;s parent catalog</li>
<li><code>USE SCHEMA</code> on the object&#x27;s parent schema</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-grant-permissions-to-extract-lineage-and-usage-from-system-tables">(Optional) Grant permissions to extract lineage and usage from system tables<a href="#optional-grant-permissions-to-extract-lineage-and-usage-from-system-tables" class="hash-link" aria-label="Direct link to (Optional) Grant permissions to extract lineage and usage from system tables" title="Direct link to (Optional) Grant permissions to extract lineage and usage from system tables">â</a></h2>
<p>You must have a Unity Catalog-enabled workspace to use system tables.</p>
<p>Atlan supports extracting the following for your Databricks assets using <a href="https://docs.databricks.com/en/admin/system-tables/index.html#grant-access-to-system-tables" target="_blank" rel="noopener noreferrer">system tables</a>:</p>
<ul>
<li><a href="/apps/connectors/data-warehouses/databricks/how-tos/extract-lineage-and-usage-from-databricks">lineage</a></li>
<li><a href="/apps/connectors/data-warehouses/databricks/how-tos/extract-lineage-and-usage-from-databricks">usage and popularity metrics</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-systemaccess-schema">Enable system.access schema<a href="#enable-systemaccess-schema" class="hash-link" aria-label="Direct link to Enable system.access schema" title="Direct link to Enable system.access schema">â</a></h3>
<p>You need your account admin to enable the <code>system.access</code> schema using the <a href="https://docs.databricks.com/api/workspace/systemschemas" target="_blank" rel="noopener noreferrer">SystemSchemas API</a>. This enables Atlan to extract lineage using system tables.</p>
<p>In Atlan, one Databricks connection corresponds to one metastore. Repeat the following process for each metastore in your Databricks environment for which you want to extract lineage.</p>
<p>To verify that system schemas are enabled for each schema, follow the steps in <a href="https://docs.databricks.com/api/workspace/systemschemas/list" target="_blank" rel="noopener noreferrer">Databricks documentation</a>:</p>
<ul>
<li><a href="https://docs.databricks.com/api/workspace/systemschemas/list" target="_blank" rel="noopener noreferrer">List system schemas</a> using the SystemSchemas API to check the status.</li>
<li>If enabled for any given schema, the <a href="https://docs.databricks.com/en/admin/system-tables/index.html#list-available-system-schemas" target="_blank" rel="noopener noreferrer">state</a> is <code>EnableCompleted</code>. This confirms that the schema has been enabled for that specific metastore.</li>
<li>Atlan can only extract lineage using system tables when the state is marked as <code>EnableCompleted</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-enable-systeminformation_schematable">(Optional) enable <code>system.information_schema.table</code><a href="#optional-enable-systeminformation_schematable" class="hash-link" aria-label="Direct link to optional-enable-systeminformation_schematable" title="Direct link to optional-enable-systeminformation_schematable">â</a></h3>
<p>To generate lineage with the target type set as <code>PATH</code> for a table, Atlan uses metadata from <code>system.information_schema.table</code> to resolve table paths and dependencies. To enable this, you must grant the following permissions on the relevant catalog, schema, and tables.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="grant-permissions">Grant permissions<a href="#grant-permissions" class="hash-link" aria-label="Direct link to Grant permissions" title="Direct link to Grant permissions">â</a></h4>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Who can do this?</div><div class="admonitionContent_BuS1"><p>You must be a metastore admin, have the <code>MANAGE</code> privilege on the object, or be the owner of the catalog, schema, or table to grant these permissions.</p></div></div>
<p>In Atlan, one Databricks connection corresponds to one metastore. Repeat the following process for each metastore from which you want to extract lineage.</p>
<ol>
<li>Open <strong>Catalog Explorer</strong> in your Databricks workspace.</li>
<li>Navigate to the catalog (for example, <code>main</code>) and then to the appropriate schema (for example, <code>sales</code>).</li>
<li>Click the <strong>Permissions</strong> tab.</li>
<li>Click <strong>Grant</strong>.</li>
<li>Enter the user or group name (principal).</li>
<li>Assign the following permissions:<!-- -->
<ul>
<li><code>USAGE</code> on the catalog</li>
<li><code>USAGE</code> on the schema</li>
<li><code>SELECT</code> on each relevant table</li>
</ul>
</li>
<li>Click <strong>Grant</strong> to apply the changes.</li>
</ol>
<p>These privileges enable Atlan to read table definitions and other metadata from the metastore.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-enable-systemquery-schema">(Optional) enable system.query schema<a href="#optional-enable-systemquery-schema" class="hash-link" aria-label="Direct link to (Optional) enable system.query schema" title="Direct link to (Optional) enable system.query schema">â</a></h3>
<p>This is only required if you also want to extract <a href="/product/capabilities/usage-and-popularity/how-tos/interpret-usage-metrics">usage and popularity metrics</a> from Databricks.</p>
<p>You need your account admin to enable the <code>system.query</code> schema using the <a href="https://docs.databricks.com/api/workspace/systemschemas" target="_blank" rel="noopener noreferrer">SystemSchemas API</a>. This enables Atlan to mine query history using system tables for usage and popularity metrics.</p>
<p>To verify that system schemas is enabled for each schema, follow the steps in <a href="https://docs.databricks.com/api/workspace/systemschemas/list" target="_blank" rel="noopener noreferrer">Databricks documentation</a>. If enabled for any given schema, the <a href="https://docs.databricks.com/en/admin/system-tables/index.html#list-available-system-schemas" target="_blank" rel="noopener noreferrer">state</a> is <code>EnableCompleted</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>ðª <strong>Did you know?</strong> Can&#x27;t grant <code>SELECT</code> permissions on the system tables in <code>system.access</code> and <code>system.query</code>? Skip the previous steps and create cloned views in a separate catalog and schema. See <a href="#optional-create-cloned-views-of-system-tables">Create cloned views of system tables</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grant-permissions-1">Grant permissions<a href="#grant-permissions-1" class="hash-link" aria-label="Direct link to Grant permissions" title="Direct link to Grant permissions">â</a></h3>
<p>Atlan supports extracting Databricks lineage and usage and popularity metrics using system tables for <a href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-databricks">all three authentication methods</a>.</p>
<p>Once you have created a <a href="#personal-access-token-authentication">personal access token</a>, an <a href="#aws-service-principal-authentication">AWS service principal</a>, or an <a href="#azure-service-principal-authentication">Azure service principal</a>, you will need to grant the following permissions:</p>
<ul>
<li><code>CAN_USE</code> on a SQL warehouse</li>
<li><code>USE_CATALOG</code> on <code>system</code> catalog</li>
<li><code>USE SCHEMA</code> on <code>system.access</code> schema</li>
<li><code>USE SCHEMA</code> on <code>system.query</code> schema (tomine query history for usage and popularity metrics)</li>
<li><code>SELECT</code> on the following tables:<!-- -->
<ul>
<li><code>system.query.history</code>(to mine query history for usage and popularity metrics)</li>
<li><code>system.access.table_lineage</code></li>
<li><code>system.access.column_lineage</code></li>
</ul>
</li>
</ul>
<p>You need to <a href="/apps/connectors/data-warehouses/databricks/how-tos/crawl-databricks">create a Databricks connection in Atlan</a> for each metastore. You can use the hostname of your Unity Catalog-enabled workspace as the <em>Host</em> for the connection.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>ðª <strong>Did you know?</strong> Can&#x27;t grant <code>SELECT</code> permissions on the system tables in <code>system.access</code> and <code>system.query</code>? Skip the previous steps and create cloned views in a separate catalog and schema. See <a href="#optional-create-cloned-views-of-system-tables">Create cloned views of system tables</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-create-cloned-views-of-system-tables">(Optional) Create cloned views of system tables<a href="#optional-create-cloned-views-of-system-tables" class="hash-link" aria-label="Direct link to (Optional) Create cloned views of system tables" title="Direct link to (Optional) Create cloned views of system tables">â</a></h3>
<p>When you don&#x27;t want to grant access to system tables directly, you can create cloned views to expose lineage and popularity metrics through a separate schema.</p>
<p>Follow these steps to set up cloned views:</p>
<ul>
<li>
<p>Create a catalog and schema to store cloned views. Use meaningful and unique namesâfor example, <code>atlan_cloned_catalog</code> and <code>atlan_cloned_schema</code>.</p>
</li>
<li>
<p>Create cloned views for the following system tables:</p>
<ul>
<li>
<p><strong>Lineage tables</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">OR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLACE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VIEW</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cloned</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">catalog</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cloned</span><span class="token operator" style="color:#393A34">-</span><span class="token keyword" style="color:#00009f">schema</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">column_lineage </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> system</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">access</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">column_lineage</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">OR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLACE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VIEW</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cloned</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">catalog</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cloned</span><span class="token operator" style="color:#393A34">-</span><span class="token keyword" style="color:#00009f">schema</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">table_lineage </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> system</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">access</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">table_lineage</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<ul>
<li>Replace <code>&lt;cloned-catalog-name&gt;</code> and <code>&lt;cloned-schema-name&gt;</code> with the catalog and schema names used in your environment.</li>
</ul>
</li>
<li>
<p><strong>Popularity metrics</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">OR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLACE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VIEW</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cloned</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">catalog</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cloned</span><span class="token operator" style="color:#393A34">-</span><span class="token keyword" style="color:#00009f">schema</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query_history </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> system</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">history</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<ul>
<li>Replace <code>&lt;cloned-catalog-name&gt;</code> and <code>&lt;cloned-schema-name&gt;</code> with the catalog and schema names used in your environment.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="grant-permissions-2">Grant permissions<a href="#grant-permissions-2" class="hash-link" aria-label="Direct link to Grant permissions" title="Direct link to Grant permissions">â</a></h4>
<p>Grant the following permissions to enable access to the cloned views:</p>
<ul>
<li><code>CAN_USE</code> on a SQL warehouse</li>
<li><code>USE CATALOG</code> on the catalog (for example, <code>&lt;cloned-catalog-name&gt;</code>)</li>
<li><code>USE SCHEMA</code> and <code>SELECT</code> on the schema (for example, <code>&lt;cloned-catalog-name&gt;.&lt;cloned-schema-name&gt;</code>)</li>
</ul>
<p>You must <a href="/apps/connectors/data-warehouses/databricks/how-tos/crawl-databricks">create a Databricks connection in Atlan</a> for each metastore. You can use the hostname of your Unity Catalog-enabled workspace as the <em>Host</em> for the connection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="locate-warehouse-id">Locate warehouse ID<a href="#locate-warehouse-id" class="hash-link" aria-label="Direct link to Locate warehouse ID" title="Direct link to Locate warehouse ID">â</a></h3>
<p>To extract lineage and usage and popularity metrics using system tables, you will also need the <a href="/apps/connectors/data-warehouses/databricks/how-tos/extract-lineage-and-usage-from-databricks">warehouse ID of your SQL warehouse</a>.</p>
<p>To locate the warehouse ID:</p>
<ol>
<li>Log in to your Databricks workspace as a workspace admin.</li>
<li>From the left menu of your workspace, click <strong>SQL Warehouses</strong>.</li>
<li>On the <em>Compute</em> page, select the warehouse you want to use.</li>
<li>From the <em>Overview</em> tab of your warehouse page, next to the <em>Name</em> of your warehouse, copy the value for your SQL warehouse <em>ID</em>. For example, <code>example-warehouse (ID: 123ab4c5def67890)</code>, copy the value <code>123ab4c5def67890</code> and store it in a secure location.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-grant-view-permissions-to-access-databricks-entities-via-apis">(Optional) Grant view permissions to access Databricks entities via APIs<a href="#optional-grant-view-permissions-to-access-databricks-entities-via-apis" class="hash-link" aria-label="Direct link to (Optional) Grant view permissions to access Databricks entities via APIs" title="Direct link to (Optional) Grant view permissions to access Databricks entities via APIs">â</a></h2>
<p>Atlan uses Databricks REST APIs to extract metadata for Notebooks, Queries, Jobs, and Pipelines. This information helps to understand which Databricks enitity was used to create a lineage between assets. Use the steps below for each object type to grant <strong>CAN VIEW</strong> permission to the Databricks user or service principal configured in your integration:</p>
<ol>
<li>
<p><strong>Notebook API</strong>(<code>/api/2.0/workspace/list</code>): Grant <strong>CAN VIEW</strong> permission on individual notebooks, or on the workspace folder containing the notebooks, or on the entire workspace. For more information, see <a href="https://docs.databricks.com/security/access-control/lists.html#manage-access-control-lists-with-folders" target="_blank" rel="noopener noreferrer">Manage Access Control Lists with Folders</a>.</p>
</li>
<li>
<p><strong>Queries API</strong>(<code>/api/2.0/sql/queries</code>): Grant <strong>CAN VIEW</strong> permission on individual queries, or on the workspace folder containing the queries, or on the entire workspace. For more information, see <a href="https://docs.databricks.com/sql/users-guide/queries/view-queries.html" target="_blank" rel="noopener noreferrer">View Queries</a>.</p>
</li>
<li>
<p><strong>Job API</strong>(<code>/api/2.2/jobs/list</code>): Grant <strong>CAN VIEW</strong> permission on each job object directly.<br>
<!-- -->Databricks Jobs are distinct from notebooks or files and require permission set directly on the job object. For more information, see <a href="https://docs.databricks.com/jobs/jobs-access-control.html" target="_blank" rel="noopener noreferrer">Control Access to a Job</a>.</p>
</li>
<li>
<p><strong>Pipeline API</strong>(<code>/api/2.0/pipelines</code>): Grant <strong>CAN VIEW</strong> permission on each Delta Live Tables (DLT) pipeline object directly. For more information, see <a href="https://docs.databricks.com/delta-live-tables/security.html#configure-pipeline-permissions" target="_blank" rel="noopener noreferrer">Configure Pipeline Permissions</a>.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-grant-permissions-for-views-and-materialized-views">(Optional) Grant permissions for views and materialized views<a href="#optional-grant-permissions-for-views-and-materialized-views" class="hash-link" aria-label="Direct link to (Optional) Grant permissions for views and materialized views" title="Direct link to (Optional) Grant permissions for views and materialized views">â</a></h2>
<p>Atlan requires the following permissions to to extract view definitions from and generate lineagefor views and materialized views:</p>
<ol>
<li>Log in to your Databricks workspace as a workspace admin.</li>
<li>From the left menu of your workspace, click <strong>Catalog</strong>.</li>
<li>In the <em>Catalog Explorer</em>, select the catalog you want to extract view definitions from and generate lineage for in Atlan.</li>
<li>From the tabs at the top, click the <strong>Permissions</strong> tab, and then click <strong>Grant</strong>.</li>
<li>In the <strong>Grant on (workspace name)</strong> dialog, configure the following:<!-- -->
<ul>
<li>Select the <strong>user</strong> or <strong>service principal</strong> under <strong>Principals</strong>.</li>
<li>Select the following privileges under <strong>Privilege presets</strong>:<!-- -->
<ul>
<li><code>USE CATALOG</code></li>
<li><code>USE SCHEMA</code></li>
<li><code>SELECT</code></li>
</ul>
</li>
</ul>
</li>
<li>Click <strong>Grant</strong> to apply the permissions.</li>
<li>Repeat steps 3â6 for each catalog you want to crawl in Atlan.</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span><strong>Did you know?</strong></div><div class="admonitionContent_BuS1"><p><code>SELECT</code> permission is required to extract the definitions of views and materialized views. If you prefer not to grant <code>SELECT</code> at the catalog level, you can grant it on individual views and materialized views instead.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-grant-permissions-to-mine-query-history">(Optional) Grant permissions to mine query history<a href="#optional-grant-permissions-to-mine-query-history" class="hash-link" aria-label="Direct link to (Optional) Grant permissions to mine query history" title="Direct link to (Optional) Grant permissions to mine query history">â</a></h2>
<p>To <a href="/apps/connectors/data-warehouses/databricks/how-tos/extract-lineage-and-usage-from-databricks">mine query history</a> using REST API, you will need to assign the <code>CAN MANAGE</code> permission on your SQL warehouses to the user or service principal.</p>
<p>To grant permissions to mine query history:</p>
<ol>
<li>Log in to your Databricks workspace as a workspace admin.</li>
<li>From the left menu of your workspace, click <strong>SQL Warehouses</strong>.</li>
<li>On the <em>Compute</em> page, for each SQL warehouse you want to mine query history, click the 3-dot icon and then click <strong>Permissions</strong>.</li>
<li>In the <em>Manage permissions</em> dialog, configure the following:<!-- -->
<ol>
<li>In the <em>Type to add multiple users or groups</em> field, search for and select a user or service principal.</li>
<li>Expand the <em>Can use</em> permissions dropdown and then select <strong>Can manage</strong>. This permission enables the service principal to <a href="https://docs.databricks.com/en/security/auth-authz/access-control/index.html#sql-warehouses" target="_blank" rel="noopener noreferrer">view all queries for the warehouse</a>.</li>
<li>Click <strong>Add</strong> to assign the <code>CAN MANAGE</code> permission to the service principal.</li>
</ol>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/data">data</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/authentication">authentication</a></li></ul></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/apps/connectors/data-warehouses/databricks"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Databricks</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/apps/connectors/data-warehouses/databricks/how-tos/set-up-cross-workspace-extraction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Set up cross-workspace extraction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#personal-access-token-authentication" class="table-of-contents__link toc-highlight">Personal access token authentication</a></li><li><a href="#aws-service-principal-authentication" class="table-of-contents__link toc-highlight">AWS service principal authentication</a></li><li><a href="#azure-service-principal-authentication" class="table-of-contents__link toc-highlight">Azure service principal authentication</a></li><li><a href="#grant-permissions-to-crawl-metadata" class="table-of-contents__link toc-highlight">Grant permissions to crawl metadata</a></li><li><a href="#optional-grant-permissions-to-query-and-preview-data" class="table-of-contents__link toc-highlight">(Optional) Grant permissions to query and preview data</a></li><li><a href="#optional-grant-permissions-to-import-and-update-tags" class="table-of-contents__link toc-highlight">(Optional) Grant permissions to import and update tags</a></li><li><a href="#optional-grant-permissions-to-extract-lineage-and-usage-from-system-tables" class="table-of-contents__link toc-highlight">(Optional) Grant permissions to extract lineage and usage from system tables</a></li><li><a href="#optional-grant-view-permissions-to-access-databricks-entities-via-apis" class="table-of-contents__link toc-highlight">(Optional) Grant view permissions to access Databricks entities via APIs</a></li><li><a href="#optional-grant-permissions-for-views-and-materialized-views" class="table-of-contents__link toc-highlight">(Optional) Grant permissions for views and materialized views</a></li><li><a href="#optional-grant-permissions-to-mine-query-history" class="table-of-contents__link toc-highlight">(Optional) Grant permissions to mine query history</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Atlan Pte. Ltd.</div></div></div></footer><span class="badge_WFAO badge_primary_SeIF" style="cursor:default"></span></div>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e1fb302c1f9be4',t:'MTc1NzcwNzEyMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>