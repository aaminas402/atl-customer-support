<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-secure-agent/how-tos/aws-eks/install-secure-agent-on-aws-eks" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Install on AWS EKS | Atlan Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.atlan.com/secure-agent/how-tos/aws-eks/install-secure-agent-on-aws-eks"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Install on AWS EKS | Atlan Documentation"><meta data-rh="true" name="description" content="This guide provides step-by-step instructions to install the Secure Agent on an Amazon Elastic Kubernetes Service (AWS EKS) cluster."><meta data-rh="true" property="og:description" content="This guide provides step-by-step instructions to install the Secure Agent on an Amazon Elastic Kubernetes Service (AWS EKS) cluster."><link data-rh="true" rel="icon" href="/img/atlan.ico"><link data-rh="true" rel="canonical" href="https://docs.atlan.com/secure-agent/how-tos/aws-eks/install-secure-agent-on-aws-eks"><link data-rh="true" rel="alternate" href="https://docs.atlan.com/secure-agent/how-tos/aws-eks/install-secure-agent-on-aws-eks" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.atlan.com/secure-agent/how-tos/aws-eks/install-secure-agent-on-aws-eks" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://N7XGBZ1DRU-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Secure Agent","item":"https://docs.atlan.com/secure-agent/"},{"@type":"ListItem","position":2,"name":"Install on AWS EKS","item":"https://docs.atlan.com/secure-agent/how-tos/aws-eks/install-secure-agent-on-aws-eks"}]}</script><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TZTFMW4J",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Atlan Documentation" href="/opensearch.xml">
<script>window.chatbaseConfig={chatbotId:"btNPYbU8VGvFO0WWx3RKy"}</script>
<script src="https://darkvisitors.com/tracker.js?project_key=d507548f-a6ca-4d07-a911-d7ba35b9fec1"></script>
<script src="/scripts/atlan-scout.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.2ae6c2ab.css">
<script src="/assets/js/runtime~main.0b8b8442.js" defer="defer"></script>
<script src="/assets/js/main.8984a2fd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TZTFMW4J" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/atlan-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top customNavbar_Xl4v"><div class="topRow_xtvp"><div class="leftSection_J1NA"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/atlan-logo.svg" alt="Atlan Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="52" width="52"><img src="/img/atlan-logo.svg" alt="Atlan Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="52" width="52"></div><b class="navbar__title text--truncate"></b></a></div><div class="centerSection_aleN"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="rightSection_NZiV"><a href="https://docs.google.com/forms/d/e/1FAIpQLScuAIhCm2GS7YFstrOjawbP8J7PUmOynQo7wI2yGCcCyEcVSw/viewform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Partner with us<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://shipped.atlan.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">What&#x27;s new<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://atlan.zendesk.com/auth/v2/login/signin?return_to=https%3A%2F%2Fatlan.zendesk.com%2Fhc%2Fen-us&amp;theme=hc&amp;locale=en-us&amp;brand_id=1900000425113&amp;auth_origin=1900000425113%2Cfalse%2Ctrue" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support portal<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="signInButton_ixSd"><a class="navbar__item navbar__link" href="/support/submit-request">Contact support</a></div><button class="clean-btn mobileMenuButton_ad49" aria-label="Toggle navigation bar"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div></div><div class="menuRow_gXbp"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__item navbar__link" href="/get-started/what-is-atlan">Get started</a><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Connect data<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Use data<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Build governance<span class="nestedDropdownCaret_oaQx"></span></a></div><div class="navbar__item dropdown nestedDropdownRoot_TGVd"><a href="#" role="button" tabindex="0" class="navbar__link nestedDropdownLink_AhWE" aria-haspopup="true" aria-expanded="false">Configure Atlan<span class="nestedDropdownCaret_oaQx"></span></a></div></div><div class="navbar__items navbar__items--right"></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/secure-agent">Secure Agent</a><button aria-label="Collapse sidebar category &#x27;Secure Agent&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/secure-agent/how-tos/k3s/install-secure-agent-on-virtual-machine-k3s">Manage Agent</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/secure-agent/how-tos/k3s/install-secure-agent-on-virtual-machine-k3s">K3s</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/secure-agent/how-tos/aws-eks/install-secure-agent-on-aws-eks">AWS EKS</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/secure-agent/how-tos/aws-eks/install-secure-agent-on-aws-eks">Install on AWS EKS</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/secure-agent/how-tos/configure-secure-agent-for-workflow-execution">Configure workflow execution</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/secure-agent/references/deployment-architecture">References</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/secure-agent/references/deployment-architecture">Deployment architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/secure-agent/references/security">Security</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Connect data</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/secure-agent"><span>Secure Agent</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Manage Agent</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">AWS EKS</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Install on AWS EKS</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Install on AWS EKS</h1></header><p>This guide provides step-by-step instructions to install the Secure Agent on an Amazon Elastic Kubernetes Service (AWS EKS) cluster.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-requirements">System requirements<a href="#system-requirements" class="hash-link" aria-label="Direct link to System requirements" title="Direct link to System requirements">â</a></h2>
<p>To deploy the Secure Agent on AWS EKS, ensure the following system requirements are met:</p>
<ol>
<li>
<p>Configure network access between your Secure Agent and Atlan tenant. For more information, see <a href="/secure-agent/references/security#whitelisting">Whitelisting Secure Agent</a>.</p>
</li>
<li>
<p>You need Kubernetes version 1.19 or higher.</p>
</li>
<li>
<p>You need to install Helm and kubectl on the machine you&#x27;re using to connect to the AWS EKS cluster.</p>
</li>
<li>
<p>You need at least 1 node for base services with a disk space of 20 GB and instance configuration as below:</p>
<table><thead><tr><th>Environment</th><th>Minimum instance type</th><th>Recommended instance type</th></tr></thead><tbody><tr><td>Production</td><td>t3.large</td><td>Custom based on workload</td></tr><tr><td>Non-production</td><td>t3.large</td><td>t3.xlarge</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>ðª <strong>Did you know?</strong> For optimal autoscaling, scale nodes based on the number of concurrent workflows.</p></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="permissions-required">Permissions required<a href="#permissions-required" class="hash-link" aria-label="Direct link to Permissions required" title="Direct link to Permissions required">â</a></h2>
<p>Before installing the Secure Agent, make sure the following permissions are in place:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissions-for-the-installer">Permissions for the Installer<a href="#permissions-for-the-installer" class="hash-link" aria-label="Direct link to Permissions for the Installer" title="Direct link to Permissions for the Installer">â</a></h3>
<p>The user, service or system account performing the installation needs access to the EKS cluster and permissions to manage Custom Resource Definitions (CRDs).</p>
<ol>
<li>
<p>Ensure the kubeconfig is correctly configured for your target EKS cluster. If needed, use the following command to configure or update your kubeconfig file.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws eks update-kubeconfig --region ``&lt;region&gt;`` --name ``&lt;cluster-name&gt;``</span><br></span></code></pre></div></div>
<ul>
<li>Replace <code>&lt;region&gt;</code> with your AWS region (for example, us-east-1) and <code>&lt;cluster-name&gt;</code> with the name of your EKS cluster.</li>
</ul>
</li>
<li>
<p>The installer needs permission to create, update, and delete Custom Resource Definitions (CRDs). If not using the cluster-admin role, grant the following:</p>
</li>
</ol>
<ul>
<li>
<p>Create a file named <code>agent-crd-permissions.yaml</code> on your machine.</p>
</li>
<li>
<p>Copy the following content into the file:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ClusterRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Use a descriptive name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: helm-crd-installer-role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- apiGroups: [&quot;apiextensions.k8s.io&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources: [&quot;customresourcedefinitions&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Recommended verbs for Helm CRD management</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  verbs: [&quot;create&quot;, &quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;delete&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ClusterRoleBinding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Use a descriptive name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: helm-crd-installer-binding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subjects:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># *** IMPORTANT: Modify this section based on who is running Helm ***</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Choose ONE of the following options and replace placeholders.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Option 1: Bind to a specific User</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- kind: User</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: &quot;your-kubernetes-username&quot; # Replace with the installing user&#x27;s K8s username recognized by the cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  apiGroup: rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Option 2: Bind to a specific Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># - kind: Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   name: &quot;your-kubernetes-groupname&quot; # Replace with the installing user&#x27;s K8s group name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   apiGroup: rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Option 3: Bind to a Service Account (e.g., for CI/CD pipelines)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># - kind: ServiceAccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   name: &quot;installer-sa-name&quot; # Replace with the installer SA&#x27;s name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   namespace: &quot;installer-sa-namespace&quot; # Replace with the installer SA&#x27;s namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">roleRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # This refers to the ClusterRole created above</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: ClusterRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: helm-crd-installer-role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  apiGroup: rbac.authorization.k8s.io</span><br></span></code></pre></div></div>
<p>Follow the comments in the file to replace the placeholders. In the above file:</p>
<ul>
<li>Resource: <code>customresourcedefinitions</code> - needed for managing CRDs in the cluster.</li>
<li>API Group: <code>apiextensions.k8s.io</code> - required to work with CRDs.</li>
<li>Verbs: create, get, list, update, delete - necessary for installing, inspecting, updating, and cleaning up CRDs using Helm.</li>
<li>ClusterRoleBinding: needed to assign the role to the user or group performing the installation.</li>
<li>Once youâve updated the placeholders, use the below <code>kubectl</code> command to apply the configuration:</li>
</ul>
</li>
</ul>
<ol start="4">
<li>
<p>Once youâve updated the placeholders, use the below kubectl command to apply the configuration:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f agent-crd-permissions.yaml</span><br></span></code></pre></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissions-for-the-secure-agent-pod-runtime">Permissions for the Secure Agent Pod (Runtime)<a href="#permissions-for-the-secure-agent-pod-runtime" class="hash-link" aria-label="Direct link to Permissions for the Secure Agent Pod (Runtime)" title="Direct link to Permissions for the Secure Agent Pod (Runtime)">â</a></h3>
<p>The Secure Agent runs as pods in your EKS cluster and requires permissions to interact with AWS services like S3. These permissions are granted through IAM Roles for Service Accounts (IRSA).</p>
<ol>
<li>
<p>Create a new IAM role for the Secure Agent pod.</p>
</li>
<li>
<p>Configure the trust policy to enable the Secure Agentâs Kubernetes service account to assume the role. Make sure the argo-workflow service account exists in the same namespace where you plan to install the agent. For more information, see the AWS documentation on <a href="https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html" target="_blank" rel="noopener noreferrer">IAM roles for service accounts (IRSA)</a>.</p>
<ul>
<li>
<p>Example: Trust policy for the argo-workflow service account:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Condition&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;StringEquals&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;:sub&quot;: &quot;system:serviceaccount::argo-workflow&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Replace <code>&lt;namespace&gt;</code> with the namespace where you plan to install agent.</p>
</li>
<li>
<p>Create an S3 bucket (or use an existing one), and attach the following permissions to the IAM role used by the Secure Agent:</p>
<ul>
<li><code>s3:PutObject</code>: Needed to write logs and artifacts</li>
<li><code>s3:GetObject</code>: Needed to read logs and artifacts.</li>
<li><code>s3:ListBucket</code>: Needed by Argo artifact repository for listing objects.</li>
</ul>
</li>
</ul>
</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span><strong>Did you know?</strong></div><div class="admonitionContent_BuS1"><p>The Helm chart automatically configures the necessary Kubernetes RBAC for Argo Workflows, which the Secure Agent uses. No additional configuration is required for the Secure Agent pod..</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">â</a></h2>
<p>Before proceeding, complete the following setup steps to prepare your Atlan tenant and AWS EKS cluster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-atlan-tenant">Configure Atlan tenant<a href="#configure-atlan-tenant" class="hash-link" aria-label="Direct link to Configure Atlan tenant" title="Direct link to Configure Atlan tenant">â</a></h3>
<p>In your Atlan tenant:</p>
<ol>
<li>Sign in as an Atlan admin.</li>
<li>Go to <strong>Admin</strong> from the left menu.</li>
<li>Under <strong>Workspace</strong>, click <strong>Labs</strong>.</li>
<li>Navigate to <strong>Workflow Center</strong>.</li>
<li>Enable the <strong>Crawl assets using Secure Agent</strong> toggle.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-secure-agent-settings">Configure Secure Agent settings<a href="#configure-secure-agent-settings" class="hash-link" aria-label="Direct link to Configure Secure Agent settings" title="Direct link to Configure Secure Agent settings">â</a></h3>
<p>The <code>agent_config_values.yaml</code> file is used to configure the Secure Agent, Argo Workflows, and storage for the AWS EKS cluster. Follow these instructions on the machine where you&#x27;re performing the installation.</p>
<ol>
<li>
<p>Create a file named <code>agent_config_values.yaml</code> file.</p>
</li>
<li>
<p>Copy the configuration below into the file:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># -----------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Agent core settings   -  Follow the comments to update:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 1. Image registry settings - To be updated only if you are using a private image registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. Atlan connection settings - To be updated only if you want agent to use the S3 bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. Argo Private repository settings - To be updated only if you are using private repository for Argo workflows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. Kubernetes Pod Annotation settings - To be updated only if you want to customize the Kubernetes podâs metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 5. Argo Private repository settings - To be updated only if you are using private repository for Argo workflows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 6. S3 storage settings - To be updated with S3 bucket details.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -----------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">agent:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enabled: true  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enableStorageProxy: false  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ca:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    crt: &quot;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #Provide a base64-encoded string of a JSON object, e.g., {&quot;client_id&quot;: 123, &quot;client_secret&quot;: 1243}.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #Set this only if you need to include custom headers in API calls made by the agent.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  restAPIHeaders: &quot;&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  versions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k3s: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k8s: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    helm: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 1. Image Registry Settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  image:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Only update if you&#x27;re using a private image registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    registry: &quot;public.ecr.aws&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    repository: &quot;atlanhq&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Only update if you&#x27;re using custom images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restImageName: &quot;rest-2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restImageTag: &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Only update if you&#x27;re using custom images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jdbcImageName: &quot;jdbc-metadata-extractor-with-jars&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jdbcImageTag: &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Only update if you&#x27;re using custom images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    credentialImageName: &quot;connector-auth&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    credentialImageTag: &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Only update if you&#x27;re using custom images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    csaScriptsImageName: &quot;marketplace-csa-scripts&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    csaScriptsImageTag: &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Marketplace scripts image details - keep these values as is unless using custom images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    marketplaceScriptsImageName: &quot;marketplace-scripts-agent&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    marketplaceScriptsImageTag: &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pullPolicy: IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pullSecrets: []  # Add pull secrets if using private registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  annotations: {}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels: {} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  serviceAccountName: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  automountServiceAccountToken: true </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 2. Atlan connection settings - Only update if you want to agent to use the S3 bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  atlan:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    argoToken: &quot;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vaultEnvEnabled: false  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Set to true only if the agent should store metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # in your bucket instead of sending it to Atlan via presigned URL.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    useAgentBucket: false </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadataBucket: &quot;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  persistentVolume: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scripts:  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enabled: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enabled: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minio:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enabled: false  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">argo-workflows:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  images:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pullPolicy: IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pullSecrets: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  crds:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    install: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    keep: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  singleNamespace: true  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  workflow:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serviceAccount:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      create: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rbac:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      create: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  controller:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 3. Argo Private repository settings - Only update if you are using a private image repository for Argo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # update the private image repository details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      registry: quay.io  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      repository: argoproj/workflow-controller </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tag: &quot;&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parallelism: 10 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resourceRateLimit:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      limit: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      burst: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rbac:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      create: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      secretWhitelist: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accessAllSecrets: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      writeConfigMaps: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configMap:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      create: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespaceParallelism: 10  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workflowDefaults:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # 4. Kubernetes Pod Annotation settings - Only update if you want to customize the Pod metadata.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ## For example, the annotation might be used by external systems such as proxies, or monitoring tools, and more.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        podMetadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            argo.workflow/agent-type: &quot;atlan-agent-service&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app.kubernetes.io/name: &quot;atlan-agent&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        podGC:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          strategy: OnPodSuccess  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        serviceAccountName: argo-workflow  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        automountServiceAccountToken: true      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ttlStrategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          secondsAfterCompletion: 84600 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        templateDefaults:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          container:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            securityContext:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              allowPrivilegeEscalation: false          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            resources: {}   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              - name: CA_CERT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                valueFrom:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  configMapKeyRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    name: cert-config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    key: ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    optional: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              - name: REST_API_HEADERS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                valueFrom:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  configMapKeyRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    name: agent-registry-settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    key: restAPIHeaders</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    optional: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serviceAccount:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      create: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: workflow-controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workflowNamespaces:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - default </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    revisionHistoryLimit: 10  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nodeEvents:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enabled: false </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 5. Argo Private repository settings - Only update if you are using a private image repository for Argo  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      registry: quay.io  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      repository: argoproj/argocli  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tag: &quot;&quot;    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rbac:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      create: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    serviceAccount:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      create: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    autoscaling:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enabled: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ingress:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enabled: false  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ingress.kubernetes.io/ssl-redirect: &quot;false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  executor:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    securityContext: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  artifactRepository:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    archiveLogs: true  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    useStaticCredentials: false </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 6. S3 bucket settings - needed by the secure agent to store logs and artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s3:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # S3 bucket name - Update with the bucket name you created in the Permissions required section.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      bucket: &quot;atlan--bucket&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # S3 endpoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      endpoint: &quot;s3.us-east-2.amazonaws.com&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # AWS region - Update with the region where you created bucket in the Permissions required section.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      region: &quot;us-east-2&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # Artifact path format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      keyFormat: &quot;argo-artifacts/{{workflow.namespace}}/{{workflow.name}}/{{pod.name}}&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       # Whether to use insecure connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      insecure: false </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # Use AWS SDK credentials (IAM role)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      useSDKCreds: true  </span><br></span></code></pre></div></div>
</li>
<li>
<p>In the configuration file, follow the comments to replace the necessary attributes. You may want to update the below configurations if:</p>
<ul>
<li><em>You are using a private image registry (Image registry settings)</em></li>
<li><em>You want the agent to use an S3 bucket (Atlan connection settings)</em></li>
<li><em>You are using a private repository for Argo workflows (Argo Private repository settings)</em></li>
<li><em>You want to customize the Kubernetes pod&#x27;s metadata (Kubernetes Pod Annotation settings)</em></li>
<li><em>You need specific S3 storage configuration (S3 storage settings)</em></li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-using-helm-chart">Install using Helm chart<a href="#install-using-helm-chart" class="hash-link" aria-label="Direct link to Install using Helm chart" title="Direct link to Install using Helm chart">â</a></h2>
<p>Follow these steps to install the Secure Agent and its dependencies into your AWS EKS cluster using Helm charts.</p>
<ol>
<li>
<p>Install the Argo Custom Resource Definitions (CRDs) required by the Secure Agent. This step installs only the CRDs. The Secure Agent is installed in the subsequent step using a Helm upgrade.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm install &lt;helm-app-name&gt; oci://registry-1.docker.io/atlanhq/workflow-offline-agent \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version 0.1.0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n &lt;namespace&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --create-namespace -f &lt;path/to/agent_config_values.yaml&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.name=&quot;&lt;secure-agent-name&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.atlan.domain=&quot;&lt;atlan-tenant-domain&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.atlan.token=&quot;&lt;atlan-api-token&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set argo-workflows.controller.workflowNamespaces={&lt;namespace&gt;} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set IsUpgrade=false</span><br></span></code></pre></div></div>
<p>Replace the placeholders:</p>
<ul>
<li><code>&lt;namespace&gt;</code>: The Kubernetes namespace where you want to deploy the Secure Agent.</li>
<li><code>&lt;path/to/agent_config_values.yaml&gt;</code>: The path to the YAML config file.</li>
<li><code>&lt;secure-agent-name&gt;</code>: Unique name, like agent-us-east-cdw.</li>
<li><code>&lt;helm-app-name&gt;</code>: Unique Helm release name, like atlan-agent-v1.</li>
<li><code>&lt;atlan-tenant-domain&gt;</code>: Your Atlan domain, e.g., mycompany.atlan.com.</li>
<li><code>&lt;atlan-api-token&gt;</code>: Token used for authentication. See <a href="/get-started/references/api-authentication">Create a bearer token</a>.</li>
</ul>
</li>
<li>
<p>Use the following kubectl command to associate the IAM role with the service account. This enables the Secure Agent to access the S3 bucket securely using IAM Roles for Service Accounts (IRSA). Make sure the IAM roleâs trust policy enables the argo-workflow service account to assume the role.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl annotate serviceaccount argo-workflow \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  eks.amazonaws.com/role-arn=arn:aws:iam:::role/</span><br></span></code></pre></div></div>
<p>Replace the placeholders:</p>
<ul>
<li><code>&lt;namespace</code>: The Kubernetes namespace where you want to deploy the Secure Agent.</li>
<li><code>&lt;AWS_ACCOUNT_ID&gt;</code>: Your AWS Account ID.</li>
<li><code>&lt;YourAgentIAMRoleName&gt;</code>: The IAM role name you created for the Secure Agent using IRSA.</li>
</ul>
</li>
<li>
<p>Install the Secure Agent by upgrading the Helm release. This step performs the actual Secure Agent installation after CRDs are in place.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade &lt;helm-app-name&gt; oci://registry-1.docker.io/atlanhq/workflow-offline-agent \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version 0.1.0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n &lt;namespace&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --create-namespace -f &lt;path/to/agent_config_values.yaml&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.name=&quot;&lt;secure-agent-name&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.atlan.domain=&quot;&lt;atlan-tenant-domain&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.atlan.token=&quot;&lt;atlan-api-token&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set argo-workflows.controller.workflowNamespaces={&lt;namespace&gt;} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set IsUpgrade=true</span><br></span></code></pre></div></div>
<p>Replace the placeholders:</p>
<ul>
<li><code>&lt;namespace&gt;</code>: The Kubernetes namespace where you want to deploy the Secure Agent.</li>
<li><code>&lt;path/to/agent_config_values.yaml&gt;</code>: The path to the YAML config file.</li>
<li><code>&lt;secure-agent-name&gt;</code>: Unique name, like agent-us-east-cdw.</li>
<li><code>&lt;helm-app-name&gt;</code>: Unique Helm release name, like atlan-agent-v1.</li>
<li><code>&lt;atlan-tenant-domain&gt;</code>: Your Atlan domain, e.g., mycompany.atlan.com.</li>
<li><code>&lt;atlan-api-token&gt;</code>: Token used for authentication. See <a href="/get-started/references/api-authentication">Create a bearer token</a>.</li>
</ul>
</li>
<li>
<p>While the installation is in progress, you can run the following command to verify the progress:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n &lt;namespace&gt;</span><br></span></code></pre></div></div>
<p>Replace <code>&lt;namespace&gt;</code> with the Kubernetes namespace used for deployment.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="verify-installation">Verify installation<a href="#verify-installation" class="hash-link" aria-label="Direct link to Verify installation" title="Direct link to Verify installation">â</a></h2>
<p>To confirm successful installation:</p>
<ol>
<li>Sign in to your Atlan tenant as an admin. For example, <code>https://&lt;tenant&gt;.atlan.com</code>.</li>
<li>Navigate to the <strong>Agent</strong> tab.</li>
<li>Search for your Secure Agent name.</li>
<li>If the agent appears in the list and is marked <strong>Active</strong>, installation is complete.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/security">security</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/access-control">access-control</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/permissions">permissions</a></li></ul></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/secure-agent/how-tos/k3s/install-secure-agent-on-virtual-machine-k3s"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Install on Virtual Machine (K3s)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/secure-agent/how-tos/configure-secure-agent-for-workflow-execution"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configure workflow execution</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#system-requirements" class="table-of-contents__link toc-highlight">System requirements</a></li><li><a href="#permissions-required" class="table-of-contents__link toc-highlight">Permissions required</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#install-using-helm-chart" class="table-of-contents__link toc-highlight">Install using Helm chart</a></li><li><a href="#verify-installation" class="table-of-contents__link toc-highlight">Verify installation</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Atlan Pte. Ltd.</div></div></div></footer><span class="badge_WFAO badge_primary_SeIF" style="cursor:default"></span></div>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e1fd125b867ec4',t:'MTc1NzcwNzIwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>