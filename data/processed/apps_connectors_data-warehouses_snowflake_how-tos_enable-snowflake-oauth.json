{
  "source_url": "apps_connectors_data-warehouses_snowflake_how-tos_enable-snowflake-oauth.html",
  "text": "Enable  Snowflake OAuth | Atlan Documentation\nSkip to main content\nOn this page\nAtlan supports\nSnowflake OAuth-based authentication\nÂ for\nSnowflake\nconnections. Once the integration has been completed, Atlan will generate a trusted secure token with Snowflake. This will allow Atlan to authenticate users with Snowflake on their behalf to:\nQuery data with Snowflake OAuth credentials\nView sample data with Snowflake OAuth credentials\nConfigure Snowflake OAuth in Atlan\nâ\nWho can do this?\nYou will need to be a\nconnection admin\nin Atlan to complete these steps. You will also needÂ inputs and approval from your\nSnowflake account administrator\n.\nTo configure Snowflake OAuth on a Snowflake connection, from Atlan:\nFrom the left menu of any screen, click\nAssets\n.\nFrom the\nAssets\npage, click the\nConnector\nfilter, and from the dropdown, click\nSnowflake\n.\nFrom the pills below the search bar at the top of the screen, click\nConnection\n.\nFrom the list of results, select a Snowflake connection to enable Snowflake OAuth-based authentication.\nFrom the sidebar on the right, next to\nConnection settings\n, click\nEdit\n.\nIn the\nConnection settings\ndialog:\nUnder\nAllow query\n, for\nAuthentication type\n, click\nSnowflake OAuth\nto enforce Snowflake OAuth credentials for\nquerying data\n:\nFor\nAuthentication Required\n, click\nCopy Code\nto copy a security authorization code to\nexecute it in Snowflake\n.\nUnderÂ\nDisplay sample data\n, for\nSource preview\n, click\nSnowflake OAuth\nto enforce Snowflake OAuth credentials for\nviewing sample data\n:\nIf Snowflake OAuth-based authentication is enabled for querying data, the same connection details will be reused for viewing sample data.\nIf a different authentication method is enabled for querying data, click\nCopy Code\nto copy a security authorization code to\nexecute it in Snowflake\n.\n(Optional) Toggle on\nEnable data policies created at source to apply for querying in Atlan\nto apply any data policies and user permissions at source to querying data and viewing sample data in Atlan. If toggled on, any existing\ndata policies\non the connection in Atlan will be deactivated and creation of new data policies will be disabled.\nAt the bottom right of the\nConnection settings\ndialog, click\nUpdate\n.\nDid you know?\nThe refresh token does not expire by default.\nCreate a security integration in Snowflake\nâ\nWho can do this?\nYou will need your\nSnowflake account administrator\nto run these commands. You will also need to have an\nexisting Snowflake connection\nin Atlan.\nTo create a security integration in Snowflake:\nLog in to your Snowflake instance.\nFrom the top right of your Snowflake instance, click the\n+\nbutton, and then from the dropdown, click\nSQL Worksheet\nto open a new worksheet.\nIn the query editor of your Snowflake SQL worksheet, paste the\nsecurity authorization code you copied in Atlan\n. See a representative example below:\nCREATE\nSECURITY\nINTEGRATION\n<\nname\n>\nTYPE\n=\nEXTERNAL_OAUTH\nENABLED\n=\nTRUE\nEXTERNAL_OAUTH_TYPE\n=\nOKTA\nEXTERNAL_OAUTH_ISSUER\n=\n'https://<COMPANY>.okta.com/oauth2/<ID>'\nEXTERNAL_OAUTH_JWS_KEYS_URL\n=\n'https://<COMPANY>.okta.com/oauth2/<ID>/v1/keys'\nEXTERNAL_OAUTH_AUDIENCE_LIST\n=\n(\n'<snowflake_account_url'\n)\nEXTERNAL_OAUTH_TOKEN_USER_MAPPING_CLAIM\n=\n'sub'\nEXTERNAL_OAUTH_ANY_ROLE_MODE\n=\n'ENABLE'\n;\nEXTERNAL_OAUTH_SNOWFLAKE_USER_MAPPING_ATTRIBUTE\n=\n'EMAIL_ADDRESS'\nRun the security integration in Snowflake.\n(Optional) To allow the\nACCOUNTADMIN\n,\nORGADMIN\n, or\nSECURITYADMIN\nrole to query with Snowflake OAuth-based authentication, add and run the following command to set account-level permissions:\nALTER\nACCOUNT\nSET\nEXTERNAL_OAUTH_ADD_PRIVILEGED_ROLES_TO_BLOCKED_LIST\n=\nFALSE\n;\nYour users will now be able to\nrun queries\nand\nview sample data\nusing their Snowflake OAuth credentials! ð\nDid you know?\nYou can refer to\ntroubleshooting connector-specific SSO authentication\nto troubleshoot any errors.\nConfigure Snowflake OAuth in Atlan\nCreate a security integration in Snowflake",
  "source_type": "docs"
}